{"version":3,"file":"fc-input-element.js","sourceRoot":"","sources":["../../../../src/sharedfc/input/input-element/fc-input-element.tsx"],"names":[],"mappings":"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","sourcesContent":["import { FunctionalComponent, h } from '@stencil/core';\r\nimport { attrBoolean, attrNumber, attrString, Icons, IconSize, IconSizeTypes } from '@utils/helper';\r\nimport { ButtonIconPosition } from 'components/button/button.model';\r\nimport { InputFeedbackTypes } from 'components/input-text/input-text.model';\r\nimport { FcButtonComp } from '../button-comp/fc-button-comp';\r\nimport { IconColor } from 'components/icon/icon.model';\r\n\r\nexport type FcInputElementType = {\r\n  inputId: string;\r\n  icon?: string;\r\n  iconPosition?: string;\r\n  type?: string;\r\n  autocomplete?: string;\r\n  name?: string;\r\n  pattern?: string;\r\n  placeholder?: string;\r\n  value: string;\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  readonly?: boolean;\r\n  maxlength?: number;\r\n  min?: number;\r\n  max?: number;\r\n  step?: number;\r\n  inputAriaLabel?: string;\r\n  buttonAriaLabel?: string;\r\n  hasButton?: boolean;\r\n  buttonIcon?: string;\r\n  showButtonWhenEmpty?: boolean;\r\n  showButtonWhenDisabled?: boolean;\r\n  showButtonWhenReadonly?: boolean;\r\n  labelId?: string;\r\n  helperText?: string;\r\n  helperId?: string;\r\n  helperTextSROnly?: string;\r\n  helperIdSROnly?: string;\r\n  feedback?: string;\r\n  feedbackText?: string;\r\n  feedbackId?: string;\r\n  tabindex?: string;\r\n  size?: IconSizeTypes;\r\n  unit?: string;\r\n  unitAriaLabel?: string;\r\n  ariaActiveDescendant?: string;\r\n  ariaExpanded?: boolean;\r\n  ariaControls?: string;\r\n  ariaHaspopup?: string;\r\n  role?: string;\r\n  onKeyDown?: (e?: KeyboardEvent) => void;\r\n  onInput: (e?) => void;\r\n  onFocus: () => void;\r\n  onBlur: (e?) => void;\r\n  onChange: () => void;\r\n  onClickButton?: () => void;\r\n\r\n  onInputRef: (el: HTMLInputElement) => void;\r\n};\r\n\r\nconst getInputContainerClass = (props: FcInputElementType) => ({\r\n  'ath-input__field': true,\r\n  [`ath-input__field--${props.feedback}`]: !!props.feedback,\r\n  'ath-input__field--readonly': props.readonly,\r\n  'ath-input__field--disabled': props.disabled,\r\n  [`ath-input__field--size-${props.size}`]: !!props.size,\r\n});\r\n\r\nconst getUnitClass = (props: FcInputElementType) => ({\r\n  'ath-input--unit': true,\r\n  [`ath-input--unit--disabled`]: props.disabled,\r\n});\r\n\r\nconst getAriaDescribedBy = (props: FcInputElementType) => {\r\n  const inputHintId = props.helperId ?? `${props.inputId}-hint`;\r\n  const inputHintSROnlyId = props.helperIdSROnly ?? `${props.inputId}-hintSROnly`;\r\n  const inputFeedbackId = props.feedbackId ?? `${props.inputId}-feedback`;\r\n\r\n  const descriptions: { [key: string]: string } = {};\r\n\r\n  if (!!props.helperText) descriptions[inputHintId] = inputHintId;\r\n  if (!!props.helperTextSROnly) descriptions[inputHintSROnlyId] = inputHintSROnlyId;\r\n  if (props.feedback != 'none' && !!props.feedbackText) descriptions[inputFeedbackId] = inputFeedbackId;\r\n\r\n  return descriptions;\r\n};\r\n\r\nconst getInputAttributes = (props: FcInputElementType) => {\r\n  const inputUnitId = `${props.inputId}-unit`;\r\n  const ariaDescribedBy = Object.keys(getAriaDescribedBy(props)).join(' ') == '' ? undefined : Object.keys(getAriaDescribedBy(props)).join(' ');\r\n  const ariaLabelledBy = props.unit && props.labelId ? `${props.labelId} ${props.inputId} ${inputUnitId}` : '';\r\n  const role = props.role ?? undefined;\r\n\r\n  return {\r\n    'id': attrString(props.inputId),\r\n    'icon': attrString(props.icon),\r\n    'iconPosition': attrString(props.iconPosition),\r\n    'type': attrString(props.type === 'search' ? 'text' : props.type),\r\n    'labelClearButton': attrString(props.buttonAriaLabel),\r\n    'maxlength': attrNumber(props.maxlength),\r\n    'disabled': props.disabled,\r\n    'readonly': props.readonly && !props.disabled,\r\n    'tabindex': props.disabled ? '-1' : props.tabindex,\r\n    'autocomplete': attrString(props.autocomplete),\r\n    'min': attrNumber(props.min),\r\n    'max': attrNumber(props.max),\r\n    'step': attrNumber(props.step),\r\n    'name': attrString(props.name),\r\n    'pattern': attrString(props.pattern),\r\n    'placeholder': attrString(props.placeholder),\r\n    'value': attrString(props.value, true),\r\n    'aria-label': attrString(props.inputAriaLabel),\r\n    'aria-labelledby': attrString(ariaLabelledBy),\r\n    'aria-required': attrBoolean(props.required, false),\r\n    'aria-invalid': attrBoolean(props.feedback === InputFeedbackTypes.Error, false),\r\n    'aria-describedby': attrString(ariaDescribedBy, false),\r\n    'aria-disabled': attrBoolean(props.disabled, false),\r\n    'aria-readonly': attrBoolean(props.readonly, false),\r\n    'aria-activedescendant': attrString(props.ariaActiveDescendant),\r\n    'role': role,\r\n    'aria-expanded': attrBoolean(props.ariaExpanded),\r\n    'aria-controls': attrString(props.ariaControls),\r\n    'aria-haspopup': attrString(props.ariaHaspopup),\r\n  };\r\n};\r\n\r\nconst getIconRight = (props: FcInputElementType) => {\r\n  if (props.type === 'search') {\r\n    return Icons.Search;\r\n  }\r\n\r\n  return props.iconPosition === 'right' && props.icon ? props.icon : undefined;\r\n};\r\n\r\nconst isEmptyValue = (value: string) => {\r\n  return (value || '').trim().length === 0;\r\n};\r\n\r\nconst showInputButton = (props: FcInputElementType) => {\r\n  if (!props.hasButton) {\r\n    return false;\r\n  }\r\n\r\n  if (isEmptyValue(props.value) && !props.showButtonWhenEmpty) {\r\n    return false;\r\n  }\r\n\r\n  if (props.disabled && !props.showButtonWhenDisabled) {\r\n    return false;\r\n  }\r\n\r\n  if (props.readonly && !props.showButtonWhenReadonly) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const FcInputElement: FunctionalComponent<FcInputElementType> = props => {\r\n  const inputAttributes = getInputAttributes(props);\r\n  const iconRight = getIconRight(props);\r\n  const iconButton = props.buttonIcon || Icons.InputClearValue;\r\n  const showButton = showInputButton(props);\r\n  const inputUnitId = `${props.inputId}-unit`;\r\n\r\n  return (\r\n    <div class={getInputContainerClass(props)}>\r\n      {!!props.icon && props.iconPosition === 'left' && <ath-icon icon={props.icon} size=\"md\"></ath-icon>}\r\n      <input\r\n        class=\"ath-input__text--value\"\r\n        ref={(el: HTMLInputElement) => props.onInputRef(el)}\r\n        {...inputAttributes}\r\n        onInput={props.onInput}\r\n        onFocus={props.onFocus}\r\n        onBlur={props.onBlur}\r\n        onChange={props.onChange}\r\n        onKeyDown={props.onKeyDown}\r\n      />\r\n      {!!props.unit && (\r\n        <span id={inputUnitId} class={getUnitClass(props)}>\r\n          <span aria-hidden=\"true\">{props.unit}</span> <span class=\"ath-visibility-hidden\">{props.unitAriaLabel || props.unit}</span>\r\n        </span>\r\n      )}\r\n      {showButton && (\r\n        <FcButtonComp\r\n          buttonAriaLabel={props.buttonAriaLabel}\r\n          color={props.disabled ? IconColor.Disabled : IconColor.Default}\r\n          disabled={props.disabled || props.readonly}\r\n          icon={iconButton}\r\n          iconPosition={ButtonIconPosition.IconOnly}\r\n          size={IconSize.Extrasmall}\r\n          onClick={props.onClickButton}\r\n        ></FcButtonComp>\r\n      )}\r\n      {iconRight && <ath-icon icon={iconRight} size={IconSize.Medium}></ath-icon>}\r\n    </div>\r\n  );\r\n};\r\n"]}