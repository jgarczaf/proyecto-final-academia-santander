{"version":3,"file":"tooltip.js","sourceRoot":"","sources":["../../../src/components/tooltip/tooltip.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Element, h, Host, JSX, Listen, Prop, State } from '@stencil/core';\r\nimport { TooltipColors, TooltipColor, TooltipPositions, TooltipPosition, TooltipTriggers, TooltipTrigger } from './tooltip.model';\r\n\r\nlet tooltipSequence = 0;\r\n\r\n@Component({\r\n  tag: 'ath-tooltip',\r\n  styleUrl: 'tooltip.scss',\r\n  scoped: true,\r\n})\r\nexport class AthTooltip implements ComponentInterface {\r\n  private hostId = ++tooltipSequence;\r\n  private tooltipId = `tooltip-${this.hostId}`;\r\n\r\n  /**\r\n   * Whether the tooltip has an arrow\r\n   */\r\n  @Prop() hasArrow = true;\r\n\r\n  /**\r\n   * The position of the tooltip\r\n   */\r\n  @Prop() position: TooltipPositions = TooltipPosition.Right;\r\n\r\n  /**\r\n   * The variant of the tooltip\r\n   */\r\n  @Prop() color: TooltipColors = TooltipColor.Primary;\r\n\r\n  /**\r\n   * Whether the tooltip has a maximum width, and if so, the maximum width\r\n   */\r\n  @Prop() maxWidth = 240;\r\n\r\n  /**\r\n   * The action that will show the tooltip\r\n   */\r\n  @Prop() trigger: TooltipTriggers = TooltipTrigger.Hover;\r\n\r\n  /**\r\n   * The text in the tooltip\r\n   */\r\n  @Prop() headingText = '';\r\n\r\n  @State() isVisible = false;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  @Listen('athFocus')\r\n  handleFocus() {\r\n    if (this.trigger === TooltipTrigger.Hover) {\r\n      this.showTooltip();\r\n    }\r\n  }\r\n\r\n  @Listen('athBlur')\r\n  handleBlur() {\r\n    if (this.trigger === TooltipTrigger.Hover) {\r\n      this.hideTooltip();\r\n    }\r\n  }\r\n\r\n  @Listen('athClick')\r\n  handleClick() {\r\n    if (this.trigger === TooltipTrigger.Click) {\r\n      if (this.isVisible) {\r\n        this.hideTooltip();\r\n      } else {\r\n        this.showTooltip();\r\n        document.addEventListener('focusout', this.hideTooltip);\r\n      }\r\n    }\r\n  }\r\n\r\n  @Listen('mouseenter')\r\n  handleMouseEnter() {\r\n    if (this.trigger === TooltipTrigger.Hover) {\r\n      this.showTooltip();\r\n    }\r\n  }\r\n\r\n  @Listen('mouseleave')\r\n  handleMouseLeave() {\r\n    if (this.trigger === TooltipTrigger.Hover) {\r\n      this.hideTooltip();\r\n    }\r\n  }\r\n\r\n  handleKeyDown(ev: KeyboardEvent) {\r\n    if (this.isVisible && ev.code === 'Escape') {\r\n      this.hideTooltip();\r\n    }\r\n  }\r\n\r\n  private showTooltip = () => {\r\n    this.isVisible = true;\r\n    this.calculateTooltipPosition();\r\n  };\r\n\r\n  private calculateTooltipPosition = () => {\r\n    const container = this.el.querySelector('.ath-tooltip-container');\r\n    const tooltip = this.el.querySelector('[role=\"tooltip\"]') as HTMLElement;\r\n    let containerPosition;\r\n    let tooltipPosition;\r\n    if (container) {\r\n      containerPosition = container.getBoundingClientRect();\r\n      tooltipPosition = tooltip.getBoundingClientRect();\r\n    }\r\n\r\n    if (!tooltip) {\r\n      return;\r\n    }\r\n\r\n    const minimumContainerSize = 40;\r\n    const combinedXtranslation = container.clientWidth < minimumContainerSize ? container.clientWidth / 2 + 20 : 40;\r\n\r\n    const gap = 12;\r\n\r\n    switch (this.position) {\r\n      case 'top':\r\n        tooltip.style.top = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.left = `${containerPosition.width / 2 - tooltipPosition.width / 2}px`;\r\n        break;\r\n      case 'left':\r\n        tooltip.style.top = `-${tooltipPosition.height / 2 - containerPosition.height / 2}px`;\r\n        tooltip.style.left = `-${tooltip.clientWidth + 8 + gap}px`;\r\n        break;\r\n      case 'bottom':\r\n        tooltip.style.bottom = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.left = `${containerPosition.width / 2 - tooltipPosition.width / 2}px`;\r\n        break;\r\n      case 'right':\r\n        tooltip.style.top = `-${tooltipPosition.height / 2 - containerPosition.height / 2}px`;\r\n        tooltip.style.left = `${containerPosition.width + 8 + gap}px`;\r\n        break;\r\n\r\n      case 'top-left':\r\n        tooltip.style.top = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.left = `-${tooltip.clientWidth - combinedXtranslation}px`;\r\n        break;\r\n      case 'top-right':\r\n        tooltip.style.top = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.right = `-${tooltipPosition.width - combinedXtranslation}px`;\r\n        break;\r\n\r\n      case 'bottom-left':\r\n        tooltip.style.bottom = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.left = `-${tooltip.clientWidth - combinedXtranslation}px`;\r\n        break;\r\n      case 'bottom-right':\r\n        tooltip.style.bottom = `-${tooltipPosition.height + 8 + gap}px`;\r\n        tooltip.style.right = `-${tooltipPosition.width - combinedXtranslation}px`;\r\n        break;\r\n    }\r\n  };\r\n\r\n  private hideTooltip = () => {\r\n    this.isVisible = false;\r\n    document.removeEventListener('focusout', this.hideTooltip);\r\n  };\r\n\r\n  private classNames = () => ({\r\n    'ath-tooltip': true,\r\n    [`ath-tooltip--${this.position}`]: !!this.position,\r\n    [`ath-tooltip--${this.color}`]: !!this.color,\r\n    'ath-tooltip--no-arrow': !this.hasArrow,\r\n    'ath-tooltip--visible': this.isVisible,\r\n  });\r\n\r\n  componentDidLoad(): void {\r\n    const topWindow = window.top || window;\r\n    topWindow.addEventListener('keydown', this.handleKeyDown.bind(this));\r\n\r\n    const trigger = this.el.querySelector('ath-button') ?? this.el.querySelector('ath-tooltip-trigger');\r\n\r\n    if (trigger) {\r\n      trigger.setAttribute('aria-describedby', this.tooltipId);\r\n    }\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    return (\r\n      <Host>\r\n        <div class=\"ath-tooltip-container\">\r\n          <slot></slot>\r\n          {this.headingText !== '' && (\r\n            <span\r\n              id={this.tooltipId}\r\n              role=\"tooltip\"\r\n              class={this.classNames()}\r\n              style={{\r\n                '--max-width': this.maxWidth === 0 ? 'none' : `${this.maxWidth}px`,\r\n              }}\r\n            >\r\n              {this.headingText}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}