{"version":3,"file":"chip-choice.js","sourceRoot":"","sources":["../../../src/components/chip-choice/chip-choice.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Event, EventEmitter, Host, h, Prop, Listen, Element, State, Method, AttachInternals, Watch } from '@stencil/core';\r\nimport { ChipChoiceSizes, ChipChoiceSize, ChipChoiceRole } from './chip-choice.model';\r\nimport { IconType, transformIconSize } from '@utils/helper';\r\n\r\n@Component({\r\n  tag: 'ath-chip-choice',\r\n  styleUrls: ['chip-choice.scss'],\r\n  shadow: true,\r\n  formAssociated: true,\r\n})\r\nexport class AthChipChoice implements ComponentInterface {\r\n  private initialValue: boolean;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  @AttachInternals() internals: ElementInternals;\r\n\r\n  /**\r\n   * Indica si el chip esta seleccionado\r\n   */\r\n  @Prop({ mutable: true, reflect: true }) selected = false;\r\n\r\n  /**\r\n   * Indica si el chip esta deshabilitado\r\n   */\r\n  @Prop() disabled = false;\r\n\r\n  /**\r\n   * Indica el nombre del icono a usar\r\n   */\r\n  @Prop() icon: string;\r\n\r\n  /**\r\n   * Texto del chip\r\n   */\r\n  @Prop() label: string;\r\n\r\n  /**\r\n   * The chip name for HTML Form API\r\n   */\r\n  @Prop() name: string;\r\n\r\n  /**\r\n   * The role of the chip\r\n   */\r\n  @Prop({ reflect: true }) role: string | null = ChipChoiceRole.Checkbox;\r\n\r\n  /**\r\n   * Indica el tama√±o del chip (sm/md)\r\n   */\r\n  @Prop() size: ChipChoiceSizes = ChipChoiceSize.Medium;\r\n\r\n  /**\r\n   * The chip value for HTML Form API\r\n   */\r\n  @Prop() value: string;\r\n\r\n  @Watch('selected')\r\n  watchSelectedHandler(newValue: boolean) {\r\n    if (this.isCheckbox() && !this.disabled) {\r\n      this.visualSelected = newValue;\r\n      this.el.focus();\r\n      this.setInputValue();\r\n    }\r\n  }\r\n\r\n  @Event() athChange: EventEmitter<any>;\r\n  @Event() athFocus: EventEmitter<void>;\r\n  @Event() athBlur: EventEmitter<void>;\r\n\r\n  @State() visualSelected = false;\r\n\r\n  @Method()\r\n  async select() {\r\n    if (!this.disabled) {\r\n      this.visualSelected = true;\r\n      this.el.focus();\r\n    }\r\n  }\r\n\r\n  @Method()\r\n  async unselect() {\r\n    if (!this.disabled) {\r\n      this.visualSelected = false;\r\n      this.el.blur();\r\n    }\r\n  }\r\n\r\n  @Listen('keydown')\r\n  handleKeydown(e: KeyboardEvent) {\r\n    if (e.code === 'Space' || e.code === 'Enter') {\r\n      this.toogleValueChip();\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n\r\n  @Listen('mousedown')\r\n  handleMouseDown(e: MouseEvent) {\r\n    if (this.disabled) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (!this.value) {\r\n      this.value = this.label;\r\n    }\r\n\r\n    this.initialValue = this.selected;\r\n    if (this.isCheckbox() && !this.disabled) {\r\n      this.setInputValue();\r\n    }\r\n  }\r\n\r\n  formResetCallback() {\r\n    if (this.isCheckbox() && !this.disabled) {\r\n      this.setValueChip(this.initialValue);\r\n    }\r\n  }\r\n\r\n  private isCheckbox() {\r\n    return this.role === ChipChoiceRole.Checkbox;\r\n  }\r\n\r\n  private handleClick = () => {\r\n    this.toogleValueChip();\r\n    this.select();\r\n  };\r\n\r\n  private handleFocus = () => {\r\n    if (!this.disabled) {\r\n      this.athFocus.emit();\r\n    }\r\n  };\r\n\r\n  private handleBlur = () => {\r\n    if (!this.disabled) {\r\n      this.athBlur.emit();\r\n    }\r\n  };\r\n\r\n  private toogleValueChip() {\r\n    this.setValueChip(!this.selected);\r\n  }\r\n\r\n  private setValueChip(value: boolean) {\r\n    if (!this.disabled && this.selected !== value) {\r\n      this.selected = value;\r\n      this.athChange.emit(this.el);\r\n      this.setInputValue();\r\n    }\r\n  }\r\n\r\n  private setInputValue() {\r\n    if (this.internals && 'setFormValue' in this.internals) {\r\n      this.internals?.setFormValue(this.selected ? this.value : undefined);\r\n      this.internals?.checkValidity();\r\n    }\r\n  }\r\n\r\n  private getHostAttributes = () => {\r\n    return {\r\n      'tabindex': this.visualSelected && !this.disabled ? '0' : '-1',\r\n      'aria-disabled': this.disabled ? 'true' : undefined,\r\n      'aria-checked': this.selected ? 'true' : 'false',\r\n      'onClick': this.handleClick,\r\n      'onFocus': this.handleFocus,\r\n      'onBlur': this.handleBlur,\r\n    };\r\n  };\r\n\r\n  private getHostClassNames = () => ({\r\n    'ath-chip-choice': true,\r\n  });\r\n\r\n  private getContainerClassNames = () => ({\r\n    'ath-chip-choice__container': true,\r\n    [`ath-chip-choice__container--${this.size}`]: true,\r\n    'ath-chip-choice__container--disabled': this.disabled,\r\n    [`ath-chip-choice__container--checked`]: this.selected && !this.disabled,\r\n  });\r\n\r\n  private renderIcon = () => {\r\n    return <ath-icon icon={this.icon} size={transformIconSize(IconType.Chipchoice, this.size)} color=\"inherit\"></ath-icon>;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Host {...this.getHostAttributes()} class={this.getHostClassNames()}>\r\n        <span class={this.getContainerClassNames()}>\r\n          {!!this.icon && this.renderIcon()}\r\n          <span class=\"ath-chip-choice__text\">{this.label}</span>\r\n        </span>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}