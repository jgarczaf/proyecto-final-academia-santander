{"version":3,"file":"checkbox-group.js","sourceRoot":"","sources":["../../../../src/components/checkbox/checkbox-group/checkbox-group.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Host, JSX, Prop, h, Element, Listen, Event, EventEmitter } from '@stencil/core';\r\nimport { FeedbackType, FeedbackTypes } from './checkbox-group.model';\r\nimport { FcInputFeedback, FcInputFeedbackType, FcInputHelperText, FcInputHelperTextType, FcInputLabel, FcInputLabelType } from '../../../sharedfc/input/index';\r\nimport { CheckboxChangeEventDetail, CheckboxValue } from '../checkbox.model';\r\n\r\nlet checkboxGroupSequence = 0;\r\n\r\n@Component({\r\n  tag: 'ath-checkbox-group',\r\n  styleUrls: ['checkbox-group.scss'],\r\n  shadow: true,\r\n})\r\nexport class AthCheckBoxGroup implements ComponentInterface {\r\n  private checkboxGroupId = `checkbox-group-${++checkboxGroupSequence}`;\r\n  private checkboxGroupHelperTextId = `${this.checkboxGroupId}-helper-text`;\r\n  private checkboxGroupFeedbackId = `${this.checkboxGroupId}-feedback`;\r\n  private srOnlyId = `${this.checkboxGroupId}-sr-only`;\r\n\r\n  @Element() el: HTMLElement | null;\r\n\r\n  /**\r\n   * Indica si esta deshabilitado\r\n   */\r\n  @Prop() disabled = false;\r\n\r\n  /**\r\n   * Indica el tipo de feedback\r\n   */\r\n  @Prop() feedback: FeedbackTypes = FeedbackType.None;\r\n\r\n  /**\r\n   * Texto feedback\r\n   */\r\n  @Prop() feedbackText: string;\r\n\r\n  /**\r\n   * Texto ayuda\r\n   */\r\n  @Prop() helperText: string;\r\n\r\n  /**\r\n   * Texto para el Label\r\n   */\r\n  @Prop() label: string;\r\n\r\n  /**\r\n   * Atributo name a aplicar a todo el grupo\r\n   */\r\n  @Prop() name: string;\r\n\r\n  /**\r\n   * Indica si es solo lectura\r\n   */\r\n  @Prop() readonly = false;\r\n\r\n  /**\r\n   * Indica si se muestra el asterisco\r\n   */\r\n  @Prop() showRequired = false;\r\n\r\n  /**\r\n   * Indica el texto del tooltip\r\n   */\r\n  @Prop() tooltipText: string;\r\n\r\n  /**\r\n   * Indica el ancho de la burbuja tooltip\r\n   */\r\n  @Prop() tooltipWidth = 0;\r\n\r\n  // ACCESSIBILITY\r\n  /**\r\n   * Texto oculto para lectores de pantalla indicando que el grupo es requerido\r\n   */\r\n  @Prop() requiredAriaLabel: string;\r\n\r\n  // EVENTS\r\n  /**\r\n   * Emite el array de checkboxes seleccionados\r\n   */\r\n  @Event() athChecked: EventEmitter<CheckboxChangeEventDetail[]>;\r\n\r\n  componentDidLoad() {\r\n    this.spreadProperties();\r\n    this.initializeSelectedCheckboxes();\r\n  }\r\n\r\n  /**\r\n   * Propagate attributes from parent to children.\r\n   * Set boolean attributes only for true.\r\n   */\r\n  private spreadProperties() {\r\n    const checkboxes = this.el.querySelectorAll('ath-checkbox');\r\n    checkboxes.forEach((checkbox: HTMLAthCheckboxElement) => {\r\n      if (this.readonly) {\r\n        checkbox.readonly = true;\r\n      }\r\n      if (this.disabled) {\r\n        checkbox.disabled = true;\r\n      }\r\n      if (this.name !== undefined) {\r\n        checkbox.name = this.name;\r\n      }\r\n    });\r\n  }\r\n\r\n  private selectedCheckboxes: CheckboxChangeEventDetail[] = [];\r\n\r\n  private initializeSelectedCheckboxes() {\r\n    const checkboxes = Array.from(this.el.querySelectorAll('ath-checkbox')) as HTMLAthCheckboxElement[];\r\n\r\n    checkboxes.forEach(checkbox => {\r\n      const checkboxElement = checkbox as any;\r\n      const label = checkboxElement.getAttribute('label');\r\n      const name = checkboxElement.getAttribute('name');\r\n      const value = checkboxElement.getAttribute('value');\r\n\r\n      if (value === CheckboxValue.True) {\r\n        this.selectedCheckboxes.push({ label: label, name: name, value: value });\r\n      }\r\n    });\r\n  }\r\n\r\n  @Listen('athChange')\r\n  handleChildCheckboxChange(event: CustomEvent<CheckboxChangeEventDetail>) {\r\n    event.stopPropagation();\r\n    this.updateSelectedCheckboxes(event.detail);\r\n  }\r\n\r\n  private updateSelectedCheckboxes(checkboxChangeEventDetail: CheckboxChangeEventDetail) {\r\n    const { label, name, value } = checkboxChangeEventDetail;\r\n\r\n    const index = this.selectedCheckboxes.findIndex(selected => selected.label === label);\r\n    if (index === -1) {\r\n      this.selectedCheckboxes.push({ label, name, value });\r\n    } else {\r\n      this.selectedCheckboxes.splice(index, 1);\r\n    }\r\n\r\n    this.athChecked.emit(this.selectedCheckboxes);\r\n  }\r\n\r\n  private ariaDescribedBy = () => {\r\n    const descriptions: { [key: string]: string } = {};\r\n\r\n    if (this.helperText != undefined) descriptions[this.checkboxGroupHelperTextId] = this.checkboxGroupHelperTextId;\r\n    if (this.feedback != FeedbackType.None) descriptions[this.checkboxGroupFeedbackId] = this.checkboxGroupFeedbackId;\r\n\r\n    return descriptions;\r\n  };\r\n\r\n  private getAttributesGroup() {\r\n    const describedByIds = Object.keys(this.ariaDescribedBy()).length !== 0 ? Object.keys(this.ariaDescribedBy()).join(' ') : undefined;\r\n    const ariaLabelledByIds = this.showRequired ? `${this.checkboxGroupId} ${this.srOnlyId}` : this.checkboxGroupId;\r\n\r\n    return {\r\n      'role': 'group',\r\n      'id': this.checkboxGroupId,\r\n      'name': this.name,\r\n      'aria-label': !!this.label ? this.label : undefined,\r\n      'aria-labelledby': ariaLabelledByIds,\r\n      'aria-describedby': describedByIds,\r\n      'aria-invalid': this.feedback === FeedbackType.Error ? 'true' : undefined,\r\n    };\r\n  }\r\n\r\n  private getFeedbackProps = (): FcInputFeedbackType => ({\r\n    id: this.checkboxGroupFeedbackId,\r\n    type: this.feedback,\r\n    text: this.feedbackText,\r\n  });\r\n\r\n  private getHelperTextProps = (): FcInputHelperTextType => {\r\n    return {\r\n      id: this.checkboxGroupHelperTextId,\r\n      text: !!this.helperText ? this.helperText.trim() : '',\r\n    };\r\n  };\r\n\r\n  private getLabelProps = (): FcInputLabelType => ({\r\n    htmlForId: this.checkboxGroupId,\r\n    label: this.label,\r\n    showRequired: this.showRequired,\r\n    required: this.showRequired,\r\n    tooltipText: this.tooltipText,\r\n    tooltipWidth: this.tooltipWidth,\r\n  });\r\n\r\n  render(): JSX.Element {\r\n    const ariaAttributes = this.getAttributesGroup();\r\n    const labelProps = this.getLabelProps();\r\n    const helperTextProps = this.getHelperTextProps();\r\n    const feedbackProps = this.getFeedbackProps();\r\n    return (\r\n      <Host>\r\n        <fieldset class=\"ath-checkbox--group\" {...ariaAttributes}>\r\n          {!!this.label && <FcInputLabel {...labelProps}></FcInputLabel>}\r\n          {this.showRequired && (\r\n            <div id={this.srOnlyId} class=\"sr-only\">\r\n              {this.requiredAriaLabel}\r\n            </div>\r\n          )}\r\n          <div class=\"ath-checkbox--group__items\">\r\n            <slot></slot>\r\n          </div>\r\n          {this.helperText && <FcInputHelperText {...helperTextProps}></FcInputHelperText>}\r\n          {this.feedback === 'error' && !this.disabled && !this.readonly && <FcInputFeedback {...feedbackProps}></FcInputFeedback>}\r\n        </fieldset>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}