{"version":3,"file":"accordion.js","sourceRoot":"","sources":["../../../src/components/accordion/accordion.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,OAAO,EAAO,IAAI,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACtF,OAAO,EAAmB,gBAAgB,EAAE,MAAM,mBAAmB,CAAC;AAOtE,MAAM,OAAO,YAAY;IACvB;;OAEG;IACsB,MAAM,GAAoB,gBAAgB,CAAC,GAAG,CAAC;IAExE;;OAEG;IACK,iBAAiB,GAAY,KAAK,CAAC;IAE3C;;OAEG;IACK,SAAS,CAAgB;IAExB,aAAa,GAAa,EAAE,CAAC,CAAC,wCAAwC;IACpE,EAAE,CAAc,CAAC,8CAA8C;IAG1E,YAAY,CAAC,KAAK;QAChB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC3C,CAAC;IAEO,KAAK,GAAkC,EAAE,CAAC;IAElD,gBAAgB;QACd,MAAM,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAEtD,IAAI,IAAI,EAAE,CAAC;YACT,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,oBAAoB,CAAkC,CAAC;YACnK,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC;YAE9B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gBACjC,MAAM,MAAM,GAAG,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC/C,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC;YAC3D,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAEO,qBAAqB,CAAC,mBAAmB;QAC/C,IAAI,IAAI,CAAC,MAAM,KAAK,gBAAgB,CAAC,GAAG,EAAE,CAAC;YACzC,IAAI,CAAC,wBAAwB,CAAC,mBAAmB,CAAC,CAAC;QACrD,CAAC;IACH,CAAC;IAEO,wBAAwB,CAAC,mBAAmB;QAClD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACxB,IAAI,IAAI,KAAK,mBAAmB,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAClD,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACJ,OAAO,CACL,EAAC,IAAI,qDAAC,IAAI,EAAC,QAAQ;YACjB,4DAAK,KAAK,EAAE,eAAe;gBACzB,8DAAa,CACT,CACD,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Prop, State, h, Element, JSX, Host, Listen } from '@stencil/core';\r\nimport { AccordionExpand, AccordionExpands } from './accordion.model';\r\n\r\n@Component({\r\n  tag: 'ath-accordion',\r\n  styleUrl: 'accordion.scss',\r\n  shadow: true,\r\n})\r\nexport class AthAccordion {\r\n  /**\r\n   * Indica si se pueden abrir todos los elementos al mismo tiempo\r\n   */\r\n  @Prop({ reflect: true }) expand: AccordionExpand = AccordionExpands.All;\r\n\r\n  /**\r\n   * Si es true, se muestra el divisor también en el último ítem.\r\n   */\r\n  @Prop() noLastItemDivider: boolean = false;\r\n\r\n  /**\r\n   * Indica una etiqueta accesible para el acordeón\r\n   */\r\n  @Prop() ariaLabel: string | null;\r\n\r\n  @State() expandedItems: number[] = []; // Array de índices de ítems expandidos.\r\n  @Element() el: HTMLElement; // Referencia al elemento base del componente.\r\n\r\n  @Listen('opened')\r\n  handleOpened(event) {\r\n    this.refreshAccordionitems(event.target);\r\n  }\r\n\r\n  private items: HTMLAthAccordionItemElement[] = [];\r\n\r\n  componentDidLoad() {\r\n    const slot = this.el.shadowRoot.querySelector('slot');\r\n\r\n    if (slot) {\r\n      const assignedElements = slot.assignedElements({ flatten: true }).filter(el => el.tagName.toLowerCase() === 'ath-accordion-item') as HTMLAthAccordionItemElement[];\r\n      this.items = assignedElements;\r\n\r\n      this.items.forEach((item, index) => {\r\n        const isLast = index === this.items.length - 1;\r\n        item.noDivider = isLast ? this.noLastItemDivider : false;\r\n      });\r\n    }\r\n  }\r\n\r\n  private refreshAccordionitems(activeAccordionItem) {\r\n    if (this.expand === AccordionExpands.One) {\r\n      this.closeOtherAccordionItems(activeAccordionItem);\r\n    }\r\n  }\r\n\r\n  private closeOtherAccordionItems(activeAccordionItem) {\r\n    this.items.forEach(item => {\r\n      if (item !== activeAccordionItem && item.expanded) {\r\n        item.close();\r\n      }\r\n    });\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    return (\r\n      <Host role=\"region\">\r\n        <div class={`ath-accordion`}>\r\n          <slot></slot>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}