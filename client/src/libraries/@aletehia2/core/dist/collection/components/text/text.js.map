{"version":3,"file":"text.js","sourceRoot":"","sources":["../../../src/components/text/text.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Host, Prop,h, Element, State, Watch, } from '@stencil/core';\r\nimport { AthTextColor, TextColor, defaultAthTextModel, CSS_VARS, AthTextColumns } from './text.model';\r\n\r\n@Component({\r\n  tag: 'ath-text',\r\n  styleUrls: ['text.scss'],\r\n  shadow: true,\r\n})\r\nexport class AthText implements ComponentInterface {\r\n  /**\r\n   * Texto dentro del componente\r\n   **/\r\n  @Prop() content: string;\r\n\r\n  /**\r\n   * Número de líneas máximo a mostrar\r\n   **/\r\n  @Prop() lines?: number;\r\n\r\n  /**\r\n   * Mostrar tooltip con el contenido completo cuando el texto aparece truncado\r\n   */\r\n  @Prop() withTooltip?: boolean;\r\n\r\n  /**\r\n   * Número de columnas y espaciado que se muestran\r\n   */\r\n  @Prop() columns?: AthTextColumns | string;\r\n\r\n  /**\r\n   * Define semánticamente la jerarquías del texto: p, h1, h2, h3...\r\n   */\r\n  @Prop() hierarchy: 'p' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' = defaultAthTextModel.hierarchy;\r\n\r\n  /**\r\n   * Define color del texto: default, inverse, primary, accent, subtle\r\n   */\r\n  @Prop({ reflect: true }) color: AthTextColor = TextColor.Default;\r\n\r\n\r\n  @Element() hostEl!: HTMLElement;\r\n\r\n  private pEl: HTMLElement | null = null;\r\n\r\n  /**\r\n   * Estado interno para saber si el texto está truncado\r\n   */\r\n  @State() private isTruncated = true;\r\n\r\n  private getClassNames = () => ({\r\n    'ath-text': true,\r\n    'ath-text--container': true,\r\n    [`ath-color-text--${this.color}`]: !!this.color,\r\n  });\r\n\r\n  private getEffectiveLines(): number {\r\n    const n = Number(this.lines);\r\n\r\n    if (!isNaN(n) && n > 0) {\r\n      return n;\r\n    }\r\n\r\n    return defaultAthTextModel.lines;\r\n  }\r\n\r\n  private get inlineStyle() {\r\n    const linesVal = this.getEffectiveLines();\r\n    const css: any = {};\r\n\r\n    if (linesVal && linesVal > 0) {\r\n      css[CSS_VARS.LINES] = `${linesVal}`;\r\n    }\r\n\r\n    return css;\r\n  }\r\n\r\n  private get normalizedColumns() {\r\n    const def = defaultAthTextModel.columns;\r\n    let cfg: AthTextColumns | undefined;\r\n\r\n    if (typeof this.columns === 'string') {\r\n      try {\r\n        cfg = JSON.parse(this.columns) as AthTextColumns;\r\n      } catch {\r\n        cfg = undefined;\r\n      }\r\n    } else {\r\n      cfg = this.columns;\r\n    }\r\n\r\n    return {\r\n      numColumns: cfg?.numColumns ?? def.numColumns,\r\n      spacing: cfg?.spacing ?? def.spacing,\r\n    };\r\n  }\r\n\r\n  private get isTooltipEnabled(): boolean {\r\n    return this.withTooltip === true;\r\n  }\r\n\r\n  private scheduleTruncationUpdate() {\r\n    requestAnimationFrame(() => this.updateTruncation());\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.pEl = this.hostEl.shadowRoot?.querySelector( '.ath-text', ) as HTMLElement | null;\r\n\r\n    this.scheduleTruncationUpdate();\r\n    window.addEventListener('resize', this.onResize);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener('resize', this.onResize);\r\n  }\r\n\r\n  private onResize = () => {\r\n    this.scheduleTruncationUpdate();\r\n  };\r\n\r\n  @Watch('lines')\r\n  handleLinesChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('content')\r\n  handleContentChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('columns')\r\n  handleColumnsChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('hierarchy')\r\n  handleTruncationChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  private updateTruncation() {\r\n    if (!this.pEl) {\r\n      this.isTruncated = false;\r\n      return;\r\n    }\r\n\r\n    const truncated =\r\n      this.pEl.scrollHeight > this.pEl.clientHeight + 1 ||\r\n      this.pEl.scrollWidth > this.pEl.clientWidth + 1;\r\n\r\n    if (truncated !== this.isTruncated) {\r\n      this.isTruncated = truncated;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { numColumns, spacing } = this.normalizedColumns;\r\n\r\n    const textContent = this.content ?? <slot></slot>;\r\n    const tooltipText = this.content ?? '';\r\n\r\n    const linesVal = Number(this.lines);\r\n    const effectiveLines = !isNaN(linesVal) && linesVal > 0 ? linesVal : defaultAthTextModel.lines;\r\n\r\n    const hasLines = effectiveLines > 0;\r\n    const hasColumns = typeof numColumns === 'number' && numColumns > 1;\r\n\r\n    const shouldUseColumns = hasColumns;\r\n    const shouldClamp = hasLines && !hasColumns;\r\n\r\n    const style: any = {\r\n      ...this.inlineStyle,\r\n    };\r\n\r\n    if (shouldUseColumns) {\r\n      style[CSS_VARS.COLUMNS] = String(numColumns);\r\n      style[CSS_VARS.COLUMN_GAP] = spacing;\r\n    }\r\n\r\n    const Tag = (this.hierarchy || 'p') as any;\r\n\r\n    const textElement = (\r\n      <Tag\r\n        class={{\r\n          ...this.getClassNames(),\r\n          'ath-text--columns': shouldUseColumns, \r\n          'ath-text--clamp': shouldClamp,\r\n        }}\r\n        style={style}\r\n      >\r\n        {textContent}\r\n      </Tag>\r\n    );\r\n    const shouldShowTooltip = this.isTooltipEnabled && this.isTruncated;\r\n\r\n    const content = shouldShowTooltip ? (\r\n      <ath-tooltip headingText={tooltipText} position=\"bottom\" trigger=\"hover\" maxWidth={750}>\r\n        {textElement}\r\n      </ath-tooltip>\r\n    ) : (\r\n      textElement\r\n    );\r\n\r\n    return (\r\n      <Host>\r\n        <div class=\"ath-text-container\">\r\n          {content}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}  \r\n"]}