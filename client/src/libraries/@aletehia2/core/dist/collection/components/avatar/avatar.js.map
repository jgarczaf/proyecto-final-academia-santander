{"version":3,"file":"avatar.js","sourceRoot":"","sources":["../../../src/components/avatar/avatar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Host, Prop, h, Element } from '@stencil/core';\r\nimport { AvatarSize, AvatarSizes, AvatarType, AvatarTypes } from './avatar.model';\r\n\r\n@Component({\r\n  tag: 'ath-avatar',\r\n  styleUrls: ['avatar.scss'],\r\n  shadow: true,\r\n})\r\nexport class AthAvatar implements ComponentInterface {\r\n  /**\r\n   * Initials to display in the avatar.\r\n   */\r\n  @Prop() initials: string;\r\n\r\n  /**\r\n   * Size of the avatar.\r\n   */\r\n  @Prop() size: AvatarSize = AvatarSizes.Medium;\r\n\r\n  /**\r\n   * Type of avatar (image or initials).\r\n   */\r\n  @Prop() type: AvatarType;\r\n\r\n  /**\r\n   * Name used to generate initials if none are provided.\r\n   */\r\n  @Prop() avatarName: string;\r\n\r\n  /**\r\n   * The aria-labelledby attribute of the icon\r\n   */\r\n  @Prop() ariaLabelledby?: string;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  private avatarClassType: string;\r\n\r\n  private getClassNames = (): { [key: string]: boolean } => ({\r\n    'ath-avatar': true,\r\n    [`ath-avatar--${this.size}`]: true,\r\n  });\r\n\r\n  private hasImage(): boolean {\r\n    return !!this.el.querySelector('img');\r\n  }\r\n\r\n  private getInitials = () => {\r\n    if (this.initials) {\r\n      this.avatarClassType = 'initials';\r\n      return <span class=\"ath-avatar--initials\">{this.initials.toUpperCase().slice(0, 2)}</span>;\r\n    } else if (this.avatarName) {\r\n      this.avatarClassType = 'initials';\r\n      const initials = this.avatarName\r\n        .split(' ')\r\n        .map(word => word.charAt(0).toUpperCase())\r\n        .slice(0, 2)\r\n        .join('');\r\n      return <span class=\"ath-avatar--initials\">{initials}</span>;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  private renderContent = () => {\r\n    // If type is defined and is image, Check for image\r\n    if (this.type === AvatarTypes.Image && this.hasImage()) {\r\n      this.avatarClassType = 'image';\r\n      return <slot name=\"img\"></slot>;\r\n    }\r\n\r\n    // If type is defined and is initials, check for initials\r\n    if (this.type === AvatarTypes.Initials) {\r\n      return this.getInitials() || this.renderDefaultImg();\r\n    }\r\n\r\n    // If type is undefined, check in priority order (image>initials).\r\n    if (!this.type) {\r\n      if (this.hasImage()) {\r\n        this.avatarClassType = 'image';\r\n        return <slot name=\"img\"></slot>;\r\n      }\r\n      const initialsContent = this.getInitials();\r\n      if (initialsContent) {\r\n        return initialsContent;\r\n      }\r\n    }\r\n\r\n    // Fallback to default image\r\n    return this.renderDefaultImg();\r\n  };\r\n\r\n  componentDidLoad(): void {\r\n    const athAvatar = this.el.shadowRoot.querySelector('.ath-avatar');\r\n    athAvatar.classList.add('ath-avatar--' + (this.avatarClassType || 'default'));\r\n  }\r\n\r\n  private renderDefaultImg = () => {\r\n    const theme = document.body.dataset.theme || 'core';\r\n    const assetsPath = `assets/images/pictograms/${theme}/`;\r\n    return (\r\n      <svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 32 32\">\r\n        <use xlinkHref={`${assetsPath}illu_male.svg`}></use>\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  private hasAriaLabel() {\r\n    const ariaLabel = this.el.getAttribute('aria-label');\r\n    return !!ariaLabel?.trim();\r\n  }\r\n\r\n  private hasAriaLabelledBy() {\r\n    return !this.hasAriaLabel() && !!this.ariaLabelledby?.trim();\r\n  }\r\n\r\n  private getHostAttributes() {\r\n    const ariaLabel = this.el.getAttribute('aria-label');\r\n    const hasLabel = this.hasAriaLabel() || this.hasAriaLabelledBy();\r\n    const currentAriaLabel = this.hasAriaLabel() ? ariaLabel.trim() : !!this.avatarName ? this.avatarName : undefined;\r\n    return {\r\n      'aria-label': currentAriaLabel,\r\n      'role': hasLabel ? 'img' : !!this.avatarName ? 'img' : undefined,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host {...this.getHostAttributes()}>\r\n        <div class={this.getClassNames()}>{this.renderContent()}</div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}