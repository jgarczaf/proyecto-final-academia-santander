{"version":3,"file":"ath-breadcrumb.entry.js","sources":["src/components/breadcrumb/breadcrumb.scss?tag=ath-breadcrumb&encapsulation=shadow","src/components/breadcrumb/breadcrumb.tsx"],"sourcesContent":[":host {\r\n  \r\n  div {\r\n    display: inline;\r\n  }\r\n\r\n  .ath-breadcrumb {\r\n    &__container-link {\r\n      display: inline;\r\n\r\n      &.hidden--true {\r\n        display: none;\r\n      }\r\n    }\r\n\r\n    &__container-link a {\r\n      text-decoration: none;\r\n    }\r\n\r\n    &__container-link a:hover,\r\n    &__container-link a:focus {\r\n      cursor: pointer;\r\n      text-decoration: underline;\r\n    }\r\n\r\n    &__separator {\r\n      margin: 0 6px;\r\n      user-select: none;\r\n    }\r\n\r\n    &__icon {\r\n      margin-right: 5px;\r\n      display: inline-flex;\r\n      align-items: center;\r\n      vertical-align: middle;\r\n    }\r\n\r\n    &__button {\r\n      &.hidden--true {\r\n        display: none;\r\n      }\r\n\r\n      button {\r\n        background-color: var(--ath-color-fg-primary);\r\n        border: none;\r\n        padding: 0 8px;\r\n        cursor: pointer;\r\n        font: inherit;\r\n        border-radius: 10px;\r\n      }\r\n\r\n      button:hover { \r\n        filter: brightness(0.95); \r\n      }\r\n      \r\n      button:focus-visible { \r\n        outline: 2px solid currentColor; \r\n        outline-offset: 2px; \r\n      }\r\n    }\r\n  }\r\n\r\n  .ath-breadcrumb__container-link a {\r\n    color: var(--ath-color-fg-primary);\r\n  }\r\n\r\n\r\n  .ath-breadcrumb__icon ath-icon {\r\n    color: var(--ath-color-fg-primary);\r\n  }\r\n}\r\n","import { Component, Host, h, JSX, Prop, Watch } from '@stencil/core';\r\nimport type { BreadcrumbModel } from './breadcrumb.model';\r\n\r\n@Component({\r\n  tag: 'ath-breadcrumb',\r\n  styleUrl: 'breadcrumb.scss',\r\n  shadow: true,\r\n})\r\nexport class AthBreadcrumb {\r\n  /** Opciones normalizadas del breadcrumb */\r\n  private _options: BreadcrumbModel[] = [];\r\n\r\n  /**\r\n   * Si es true y el breadcrumb tiene más de 4 elementos,\r\n   * el breadcrumb se renderiza colapsado.\r\n   *\r\n   * Al hacer click en \"...\" este valor se alterna.\r\n   */\r\n  @Prop({ reflect: true }) collapsed: boolean = false;\r\n\r\n  /** Separador entre los enlaces del breadcrumb */\r\n  @Prop() separator: string = '/';\r\n\r\n  /**\r\n   * Lista de enlaces del breadcrumb.\r\n   * Normalmente se recibe como un string JSON desde HTML.\r\n   */\r\n  @Prop() options: any;\r\n\r\n  /**\r\n   * Definición de un aria-label personalizado para el breadcrumb\r\n   */\r\n  @Prop() athAriaLabel?: string;\r\n\r\n\r\n  /**\r\n   * Observa cambios en la prop options y la normaliza\r\n   * a un array de BreadcrumbModel\r\n   */\r\n  @Watch('options')\r\n  watchOptions(): void {\r\n    this._options = this.parseOptions(this.options);\r\n  }\r\n\r\n  // @Watch('collapsed')\r\n  // watchCollapsed(newValue: boolean): void {\r\n  //   console.log('collapsed changed to', newValue);\r\n  // }\r\n\r\n  /** Ciclo de vida ejecutado antes del primer render */\r\n  componentWillLoad(): void {\r\n    this.watchOptions();\r\n  }\r\n\r\n  /** Maneja el click en el botón \"...\" para expandir/colapsar */\r\n  private _handleClick = (): void => {\r\n    this.collapsed = !this.collapsed;\r\n    \r\n  };\r\n\r\n  /**\r\n   * Parsea las opciones del breadcrumb.\r\n   * Soporta:\r\n   * - Array\r\n   * - String JSON\r\n   * - Objeto con claves numéricas\r\n   */\r\n  private parseOptions(input: any): BreadcrumbModel[] {\r\n    if (input == null) return [];\r\n\r\n    // Si ya es un array\r\n    if (Array.isArray(input)) {\r\n      return input.map((it) => ({\r\n        ...it,\r\n        url: it.url ?? '#',\r\n      }));\r\n    }\r\n\r\n    // Si es un string JSON\r\n    if (typeof input === 'string') {\r\n      try {\r\n        return this.parseOptions(JSON.parse(input));\r\n      } catch {\r\n        return [];\r\n      }\r\n    }\r\n\r\n    // Si es un objeto (posiblemente con claves \"0\", \"1\", \"2\", ...)\r\n    if (typeof input === 'object') {\r\n      const keys = Object.keys(input);\r\n      const numericKeys = keys.every((k) => /^[0-9]+$/.test(k));\r\n\r\n      const values = numericKeys\r\n        ? keys\r\n            .map((k) => Number(k))\r\n            .sort((a, b) => a - b)\r\n            .map((n) => input[String(n)])\r\n        : Object.values(input);\r\n\r\n      return (values as BreadcrumbModel[]).map((it) => ({\r\n        ...it,\r\n        url: it.url ?? '#',\r\n      }));\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Renderiza los enlaces del breadcrumb.\r\n   * - Si hay más de 4 elementos y collapsed es true:\r\n   *   se muestran solo el primero y el último, con un botón \"...\"\r\n   * - En caso contrario, se muestran todos los enlaces\r\n   */\r\n  private _renderLinks(options: BreadcrumbModel[]): JSX.Element[] {\r\n    const lastIndex = options.length - 1;\r\n    const canCollapse = options.length > 4 && this.collapsed === true;\r\n    const middleIndex = Math.floor(lastIndex / 2);\r\n\r\n    // Renderizado normal (sin colapsar)\r\n    if (!canCollapse) {\r\n      return options.map((option, i) => (\r\n        <div class=\"ath-breadcrumb__container-link\">\r\n          <a\r\n            href={option.url}\r\n            id={`link--${option.id}`}\r\n            {...(i === lastIndex ? { 'aria-current': 'page' } : {})}\r\n          >\r\n            {option.icon && (\r\n              <span class=\"ath-breadcrumb__icon\">\r\n                <ath-icon icon={option.icon} size='sm'></ath-icon>\r\n              </span>\r\n            )}\r\n            {option.name}\r\n          </a>\r\n\r\n          {i === lastIndex ? '' : (\r\n            <span class=\"ath-breadcrumb__separator\">{this.separator}</span>\r\n          )}\r\n        </div>\r\n      ));\r\n    }\r\n\r\n    // Renderizado colapsado\r\n    return options.map((option, i) => {\r\n      const isFirst = i === 0;\r\n      const isLast = i === lastIndex;\r\n\r\n      return (\r\n        <div>\r\n          {isFirst || isLast ? (\r\n            <div class=\"ath-breadcrumb__container-link hidden--false\">\r\n              <a\r\n                href={option.url}\r\n                id={`link--${option.id}`}\r\n                {...(isLast ? { 'aria-current': 'page' } : {})}\r\n              >\r\n                {option.name}\r\n              </a>\r\n\r\n              {isLast ? '' : (\r\n                <span class=\"ath-breadcrumb__separator\">{this.separator}</span>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div class={`ath-breadcrumb__container-link hidden--${this.collapsed}`}>\r\n              <a href={option.url} id={`link--${option.id}`}>\r\n                {option.name}\r\n              </a>\r\n              <span class=\"ath-breadcrumb__separator\">{this.separator}</span>\r\n            </div>\r\n          )}\r\n\r\n          {i === middleIndex ? (\r\n            <div class={`ath-breadcrumb__button hidden--${!this.collapsed}`}>\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Mostrar ruta completa del breadcrumb\"\r\n                onClick={this._handleClick}\r\n              >\r\n                ...\r\n              </button>\r\n              <span class=\"ath-breadcrumb__separator\">{this.separator}</span>\r\n            </div>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  /** Render principal del componente */\r\n  render(): JSX.Element {\r\n    return (\r\n      <Host>\r\n        <nav\r\n          class=\"ath-breadcrumb\"\r\n          aria-label={this.athAriaLabel ?? 'Breadcrumb'}\r\n        >\r\n          {this._renderLinks(this._options)}\r\n        </nav>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n"],"names":[],"mappings":";;AAAA,MAAM,aAAa,GAAG,ugCAAugC;;MCQhhC,aAAa,GAAA,MAAA;;;;;IAEhB,QAAQ,GAAsB,EAAE;AAExC;;;;;AAKG;IACsB,SAAS,GAAY,KAAK;;IAG3C,SAAS,GAAW,GAAG;AAE/B;;;AAGG;AACK,IAAA,OAAO;AAEf;;AAEG;AACK,IAAA,YAAY;AAGpB;;;AAGG;IAEH,YAAY,GAAA;QACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC;;;;;;;IASjD,iBAAiB,GAAA;QACf,IAAI,CAAC,YAAY,EAAE;;;IAIb,YAAY,GAAG,MAAW;AAChC,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS;AAElC,KAAC;AAED;;;;;;AAMG;AACK,IAAA,YAAY,CAAC,KAAU,EAAA;QAC7B,IAAI,KAAK,IAAI,IAAI;AAAE,YAAA,OAAO,EAAE;;AAG5B,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxB,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM;AACxB,gBAAA,GAAG,EAAE;AACL,gBAAA,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG;AACnB,aAAA,CAAC,CAAC;;;AAIL,QAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,YAAA,IAAI;gBACF,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;AAC3C,YAAA,MAAM;AACN,gBAAA,OAAO,EAAE;;;;AAKb,QAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC7B,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;AAC/B,YAAA,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAEzD,MAAM,MAAM,GAAG;AACb,kBAAE;qBACG,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC;qBACpB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;AACpB,qBAAA,GAAG,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAChC,kBAAE,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;YAExB,OAAQ,MAA4B,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM;AAChD,gBAAA,GAAG,EAAE;AACL,gBAAA,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG;AACnB,aAAA,CAAC,CAAC;;AAGL,QAAA,OAAO,EAAE;;AAGX;;;;;AAKG;AACK,IAAA,YAAY,CAAC,OAA0B,EAAA;AAC7C,QAAA,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC;AACpC,QAAA,MAAM,WAAW,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI;QACjE,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;;QAG7C,IAAI,CAAC,WAAW,EAAE;AAChB,YAAA,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,MAC3B,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,gCAAgC,EAAA,EACzC,CAAA,CAAA,GAAA,EAAA,EACE,IAAI,EAAE,MAAM,CAAC,GAAG,EAChB,EAAE,EAAE,CAAS,MAAA,EAAA,MAAM,CAAC,EAAE,CAAE,CAAA,EACpB,IAAC,CAAC,KAAK,SAAS,GAAG,EAAE,cAAc,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,EAAA,EAEtD,MAAM,CAAC,IAAI,KACV,CAAM,CAAA,MAAA,EAAA,EAAA,KAAK,EAAC,sBAAsB,EAAA,EAChC,CAAU,CAAA,UAAA,EAAA,EAAA,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,EAAC,IAAI,EAAY,CAAA,CAC7C,CACR,EACA,MAAM,CAAC,IAAI,CACV,EAEH,CAAC,KAAK,SAAS,GAAG,EAAE,IACnB,CAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAC,2BAA2B,EAAE,EAAA,IAAI,CAAC,SAAS,CAAQ,CAChE,CACG,CACP,CAAC;;;QAIJ,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,KAAI;AAC/B,YAAA,MAAM,OAAO,GAAG,CAAC,KAAK,CAAC;AACvB,YAAA,MAAM,MAAM,GAAG,CAAC,KAAK,SAAS;YAE9B,QACE,CAAA,CAAA,KAAA,EAAA,IAAA,EACG,OAAO,IAAI,MAAM,IAChB,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,8CAA8C,EAAA,EACvD,CAAA,CAAA,GAAA,EAAA,EACE,IAAI,EAAE,MAAM,CAAC,GAAG,EAChB,EAAE,EAAE,CAAA,MAAA,EAAS,MAAM,CAAC,EAAE,CAAE,CAAA,MACnB,MAAM,GAAG,EAAE,cAAc,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,EAAA,EAE7C,MAAM,CAAC,IAAI,CACV,EAEH,MAAM,GAAG,EAAE,IACV,CAAM,CAAA,MAAA,EAAA,EAAA,KAAK,EAAC,2BAA2B,IAAE,IAAI,CAAC,SAAS,CAAQ,CAChE,CACG,KAEN,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAE,0CAA0C,IAAI,CAAC,SAAS,CAAA,CAAE,EAAA,EACpE,CAAA,CAAA,GAAA,EAAA,EAAG,IAAI,EAAE,MAAM,CAAC,GAAG,EAAE,EAAE,EAAE,CAAA,MAAA,EAAS,MAAM,CAAC,EAAE,CAAE,CAAA,IAC1C,MAAM,CAAC,IAAI,CACV,EACJ,CAAM,CAAA,MAAA,EAAA,EAAA,KAAK,EAAC,2BAA2B,EAAA,EAAE,IAAI,CAAC,SAAS,CAAQ,CAC3D,CACP,EAEA,CAAC,KAAK,WAAW,IAChB,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,kCAAkC,CAAC,IAAI,CAAC,SAAS,CAAE,CAAA,EAAA,EAC7D,CACE,CAAA,QAAA,EAAA,EAAA,IAAI,EAAC,QAAQ,EACF,YAAA,EAAA,sCAAsC,EACjD,OAAO,EAAE,IAAI,CAAC,YAAY,EAGnB,EAAA,KAAA,CAAA,EACT,CAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAC,2BAA2B,IAAE,IAAI,CAAC,SAAS,CAAQ,CAC3D,KAEN,EAAE,CACH,CACG;AAEV,SAAC,CAAC;;;IAIJ,MAAM,GAAA;QACJ,QACE,EAAC,IAAI,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EACH,CACE,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,gBAAgB,EAAA,YAAA,EACV,IAAI,CAAC,YAAY,IAAI,YAAY,EAAA,EAE5C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC7B,CACD;;;;;;;;;;"}