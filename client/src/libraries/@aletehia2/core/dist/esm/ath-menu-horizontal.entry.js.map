{"version":3,"file":"ath-menu-horizontal.entry.js","sources":["src/components/menu-horizontal/focus-manager.ts","src/components/menu-horizontal/menu-horizontal.scss?tag=ath-menu-horizontal&encapsulation=scoped","src/components/menu-horizontal/menu-horizontal.tsx"],"sourcesContent":["export const moveFocusToItem = (\r\n  items: { id: string; disabled?: boolean }[],\r\n  direction: number,\r\n  activeItemId: string,\r\n  toEnd: boolean = false,\r\n): string | undefined => {\r\n  if (!items || items.length === 0) return activeItemId;\r\n\r\n  const currentIndex = items.findIndex(item => item.id === activeItemId);\r\n  if (currentIndex === -1) return activeItemId;\r\n\r\n  if (items[currentIndex].disabled) return activeItemId;\r\n\r\n  if (direction === 0) {\r\n    const firstEnabled = items.find(item => !item.disabled);\r\n    return firstEnabled ? firstEnabled.id : activeItemId;\r\n  }\r\n\r\n  if (toEnd) {\r\n    const lastEnabled = [...items].reverse().find(item => !item.disabled);\r\n    return lastEnabled ? lastEnabled.id : activeItemId;\r\n  }\r\n\r\n  if (direction === 1) {\r\n    for (let i = currentIndex + 1; i < items.length; i++) {\r\n      if (!items[i].disabled) return items[i].id;\r\n    }\r\n    return activeItemId;\r\n  }\r\n\r\n  if (direction === -1) {\r\n    for (let i = currentIndex - 1; i >= 0; i--) {\r\n      if (!items[i].disabled) return items[i].id;\r\n    }\r\n    return activeItemId;\r\n  }\r\n\r\n  return activeItemId;\r\n};\r\n\r\nexport const focusItem = (itemId: string, el: HTMLElement) => {\r\n  const itemElement = el.querySelector(`a#${itemId}`);\r\n  if (itemElement) {\r\n    (itemElement as HTMLElement).focus();\r\n  }\r\n};\r\n","@use '../../sharedfc/input/button-comp/fc-button-comp' as buttonComp;\r\n@use 'utilities';\r\n\r\n@include buttonComp.fc-button-comp-vars;\r\n@include buttonComp.fc-button-comp;\r\n\r\n:host {\r\n  .ath-menu-horizontal {\r\n    display: flex;\r\n    align-items: center;\r\n    border-bottom: var(--border-bottom);\r\n  }\r\n\r\n  .ath-menu-horizontal--has-divider {\r\n    border-bottom: var(--ath-border-width-xs) solid var(--ath-color-border-alpha-boldest-default);\r\n  }\r\n\r\n  .ath-menu-horizontal--item-group {\r\n    padding: var(--ath-spacing-menu-horizontal-group-padding-y) var(--ath-spacing-menu-horizontal-group-padding-x);\r\n    margin-bottom: -1px;\r\n    overflow-y: auto;\r\n    scrollbar-width: none;\r\n    /* Oculta scrollbar en Firefox */\r\n    -ms-overflow-style: none;\r\n    /* Oculta scrollbar en IE/Edge */\r\n\r\n    &::-webkit-scrollbar {\r\n      display: none;\r\n      /* Oculta scrollbar en Chrome/Safari */\r\n    }\r\n\r\n    &--list {\r\n      display: flex;\r\n      gap: var(--ath-spacing-menu-horizontal-group-col-gap);\r\n      padding: 0;\r\n      margin: 0;\r\n      white-space: nowrap;\r\n      &--item {\r\n        display: inline-block;\r\n      }\r\n    }\r\n\r\n    .last-item--padding-right {\r\n      padding-right: 20px;\r\n    }\r\n\r\n    .ath-menu-horizontal-item {\r\n      display: flex;\r\n      height: var(--ath-size-menu-horizontal-item-height);\r\n      flex-direction: column;\r\n      align-items: center;\r\n      gap: var(--ath-spacing-menu-horizontal-item-row-gap);\r\n      text-decoration: none;\r\n\r\n      &--content {\r\n        display: flex;\r\n        padding: var(--ath-spacing-menu-horizontal-item-content-padding-y) var(--ath-spacing-menu-horizontal-item-content-padding-x);\r\n        flex-direction: column;\r\n        align-items: center;\r\n        gap: var(--ath-spacing-menu-horizontal-item-content-col-gap);\r\n        border-radius: var(--ath-border-radius-menu-horizontal-item);\r\n\r\n        .ath-menu-horizontal-label {\r\n          color: var(--ath-color-fg-default);\r\n          font-family: var(--ath-font-family-primary);\r\n          font-size: var(--ath-font-size-body-md);\r\n          font-style: normal;\r\n          font-weight: var(--ath-font-weight-body-regular);\r\n          line-height: var(--ath-font-line-height-comp-md);\r\n        }\r\n      }\r\n      &--indicator {\r\n        height: var(--ath-size-menu-horizontal-item-indicator-height);\r\n        flex-shrink: 0;\r\n        align-self: stretch;\r\n        border-radius: var(--ath-border-radius-menu-horizontal-indicator);\r\n        background: var(--ath-color-menu-horizontal-item-indicator-bg);\r\n      }\r\n\r\n      &--selected {\r\n        .ath-menu-horizontal-label {\r\n          font-weight: var(--ath-font-weight-medium);\r\n        }\r\n        cursor: default;\r\n      }\r\n\r\n      &--disabled {\r\n        cursor: not-allowed;\r\n        pointer-events: none;\r\n        .ath-menu-horizontal-label {\r\n          color: var(--ath-color-fg-disabled);\r\n        }\r\n      }\r\n\r\n      &:not(.ath-menu-horizontal-item--selected):not(.ath-menu-horizontal-item--disabled):hover {\r\n        .ath-menu-horizontal-item--content {\r\n          background: var(--ath-color-bg-alpha-hovered);\r\n        }\r\n      }\r\n\r\n      &:not(.ath-menu-horizontal-item--selected):not(.ath-menu-horizontal-item--disabled):active {\r\n        .ath-menu-horizontal-item--content {\r\n          background: var(--ath-color-bg-alpha-pressed);\r\n        }\r\n      }\r\n\r\n      &:focus-visible {\r\n        outline: none;\r\n        .ath-menu-horizontal-item--content {\r\n          border-radius: var(--ath-border-radius-menu-horizontal-item);\r\n          background: var(ath-color-bg-alpha-default);\r\n          box-shadow: 0 0 0 2px var(--ath-color-border-focus);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Component, Prop, State, h, Element, Host, Watch, Event, EventEmitter } from '@stencil/core';\r\nimport { MenuHorizontalItem } from './menu-horizontal-item/menu-horizontal-item.model';\r\nimport { FcButtonComp } from 'sharedfc/input';\r\nimport { ButtonIconPosition } from 'components/button/button.model';\r\nimport { IconSize } from '@utils/helper';\r\nimport { moveFocusToItem } from 'components/menu-horizontal/focus-manager';\r\nimport { focusItem } from './focus-manager';\r\nimport { TargetType } from './menu-horizontal.model';\r\n\r\nlet menuHorizontalSequence = 0;\r\n\r\n@Component({\r\n  tag: 'ath-menu-horizontal',\r\n  styleUrl: 'menu-horizontal.scss',\r\n  scoped: true,\r\n})\r\nexport class AthMenuHorizontal {\r\n  /**\r\n   * The accessible label for the menu\r\n   */\r\n  @Prop() athAriaLabel: string;\r\n\r\n  /**\r\n   * Whether the menu has a divider below\r\n   */\r\n  @Prop() hasDivider = true;\r\n\r\n  /**\r\n   * Items to generate using the imperative way\r\n   */\r\n  @Prop() items: MenuHorizontalItem[] | string;\r\n\r\n  /**\r\n   * Emitted when an item is selected with the MenuHorizontalItem object\r\n   */\r\n  @Event() athSelected: EventEmitter<MenuHorizontalItem>;\r\n\r\n  @State() selectedMenuHorizontalItemId: string;\r\n  @State() activeMenuHorizontalItemId: string;\r\n  @State() showArrows = false;\r\n  @State() isLeftArrowHidden = false;\r\n  @State() isRightArrowHidden = false;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  private hostId = ++menuHorizontalSequence;\r\n  private menuHorizontalItems: MenuHorizontalItem[] = [];\r\n  private firstEnabledItemId: string;\r\n  private lastEnabledItemId: string;\r\n  private itemGroup!: HTMLElement;\r\n  private resizeObserver: ResizeObserver;\r\n\r\n  @Watch('items')\r\n  onItemsChange(newValue: MenuHorizontalItem[] | string, oldValue: MenuHorizontalItem[] | string) {\r\n    if (newValue !== oldValue) {\r\n      this.generateItems();\r\n      this.detectFirstAndLastEnabledTab();\r\n      this.detectSelectedItem();\r\n    }\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.generateItems();\r\n    this.detectFirstAndLastEnabledTab();\r\n    this.detectSelectedItem();\r\n    this.activeMenuHorizontalItemId = this.selectedMenuHorizontalItemId; // init\r\n  }\r\n\r\n  // Items generation\r\n  private generateItems() {\r\n    const items = this.getItemsFromAnySource();\r\n\r\n    this.menuHorizontalItems = items.map((item, i) => ({\r\n      badgeLabel: item.badgeLabel,\r\n      badgeMax: item.badgeMax,\r\n      badgeValue: item.badgeValue,\r\n      disabled: item.disabled,\r\n      externalLabel: item.externalLabel,\r\n      href: item.href,\r\n      id: `menu-horizontal-${this.hostId}-${i}`,\r\n      label: item.label,\r\n      rel: item.rel,\r\n      selected: item.selected,\r\n      target: !!item.target ? item.target : TargetType.Self,\r\n      value: item.value,\r\n    }));\r\n  }\r\n\r\n  private getItemsFromAnySource(): MenuHorizontalItem[] {\r\n    if (this.items) {\r\n      const parsedItems = typeof this.items === 'string' ? this.getItemsFromImperative(this.items) : [...this.items];\r\n      return parsedItems;\r\n    }\r\n\r\n    return this.getItemsFromDOM();\r\n  }\r\n\r\n  private getItemsFromImperative(value: string): MenuHorizontalItem[] {\r\n    try {\r\n      return value ? JSON.parse(value) : [];\r\n    } catch (error) {\r\n      console.error('Error parsing items:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private getDOMElements(): HTMLAthMenuHorizontalItemElement[] {\r\n    return Array.from(this.el.querySelectorAll('ath-menu-horizontal-item'));\r\n  }\r\n\r\n  private getItemsFromDOM(): MenuHorizontalItem[] {\r\n    return this.getDOMElements().map((item, i) => ({\r\n      badgeLabel: item.badgeLabel,\r\n      badgeMax: item.badgeMax,\r\n      badgeValue: item.badgeValue,\r\n      disabled: item.disabled,\r\n      externalLabel: item.externalLabel,\r\n      href: item.href,\r\n      id: `menu-horizontal-${this.hostId}-${i}`,\r\n      label: item.label,\r\n      rel: item.rel,\r\n      selected: item.selected,\r\n      target: !!item.target ? item.target : TargetType.Self,\r\n      value: item.value,\r\n    }));\r\n  }\r\n\r\n  private detectFirstAndLastEnabledTab() {\r\n    const firstEnabled = this.menuHorizontalItems.find(item => !item.disabled);\r\n    this.firstEnabledItemId = firstEnabled ? firstEnabled.id : undefined;\r\n\r\n    const lastEnabled = this.menuHorizontalItems\r\n      .slice()\r\n      .reverse()\r\n      .find(item => !item.disabled);\r\n    this.lastEnabledItemId = lastEnabled ? lastEnabled.id : undefined;\r\n  }\r\n\r\n  private detectSelectedItem(): void {\r\n    const selectedItem = this.menuHorizontalItems.find(item => item.selected);\r\n    this.selectedMenuHorizontalItemId = selectedItem ? selectedItem.id : this.firstEnabledItemId;\r\n\r\n    const elements = this.getDOMElements();\r\n    elements.forEach((element, index) => {\r\n      element.selected = this.menuHorizontalItems[index]?.id === this.selectedMenuHorizontalItemId;\r\n    });\r\n  }\r\n\r\n  // Arrows visibility\r\n  componentDidLoad() {\r\n    this.updateArrowsVisibility();\r\n    if (typeof ResizeObserver !== 'undefined') {\r\n      this.resizeObserver = new ResizeObserver(() => {\r\n        this.updateArrowsVisibility();\r\n      });\r\n      if (this.itemGroup) {\r\n        this.resizeObserver.observe(this.itemGroup);\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateArrowsVisibility = () => {\r\n    if (this.itemGroup) {\r\n      const hasOverflow = this.itemGroup.scrollWidth > this.itemGroup.clientWidth;\r\n      this.showArrows = hasOverflow;\r\n\r\n      this.isLeftArrowHidden = this.itemGroup.scrollLeft <= 0;\r\n      const maxScrollLeft = this.itemGroup.scrollWidth - this.itemGroup.clientWidth;\r\n      this.isRightArrowHidden = this.itemGroup.scrollLeft >= maxScrollLeft - 2;\r\n    }\r\n  };\r\n\r\n  disconnectedCallback() {\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n    }\r\n  }\r\n\r\n  // Interaction\r\n  private handleItemFocus = (event: FocusEvent) => {\r\n    const target = event.target as HTMLElement;\r\n    if (target && this.itemGroup) {\r\n      target.scrollIntoView({ behavior: 'smooth', inline: 'nearest', block: 'nearest' });\r\n    }\r\n  };\r\n\r\n  private handleItemClick = (e: MouseEvent | KeyboardEvent, item: MenuHorizontalItem) => {\r\n    if (item.disabled) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n    this.selectedMenuHorizontalItemId = item.id;\r\n\r\n    // Update items array\r\n    this.menuHorizontalItems.forEach(menuItem => {\r\n      menuItem.selected = menuItem.id === item.id;\r\n    });\r\n\r\n    // Update DOM elements if they exist\r\n    const elements = this.getDOMElements();\r\n    elements.forEach(element => {\r\n      element.selected = false;\r\n    });\r\n    const selectedIndex = parseInt(item.id.split('-').pop()!);\r\n    if (elements[selectedIndex]) {\r\n      elements[selectedIndex].selected = true;\r\n    }\r\n\r\n    this.emitSelectedEvent(item);\r\n  };\r\n\r\n  private handleKeyDown = (event: KeyboardEvent, item: MenuHorizontalItem) => {\r\n    if (event.key === 'Enter' || event.key === ' ') {\r\n      event.preventDefault();\r\n      this.handleItemClick(event, item);\r\n      return;\r\n    } else if (event.key === 'ArrowLeft') {\r\n      if (this.activeMenuHorizontalItemId !== this.firstEnabledItemId) {\r\n        const nextTabId = moveFocusToItem(this.menuHorizontalItems, -1, this.activeMenuHorizontalItemId);\r\n        focusItem(nextTabId, this.el);\r\n      }\r\n    } else if (event.key === 'ArrowRight') {\r\n      if (this.activeMenuHorizontalItemId !== this.lastEnabledItemId) {\r\n        const nextTabId = moveFocusToItem(this.menuHorizontalItems, 1, this.activeMenuHorizontalItemId);\r\n        focusItem(nextTabId, this.el);\r\n      }\r\n    } else if (event.key === 'Home') {\r\n      if (this.activeMenuHorizontalItemId !== this.firstEnabledItemId) {\r\n        focusItem(this.firstEnabledItemId, this.el);\r\n      }\r\n    } else if (event.key === 'End') {\r\n      if (this.activeMenuHorizontalItemId !== this.lastEnabledItemId) {\r\n        focusItem(this.lastEnabledItemId, this.el);\r\n      }\r\n    }\r\n    const activeElement = document.activeElement as HTMLElement;\r\n    this.activeMenuHorizontalItemId = activeElement && activeElement.id ? activeElement.id : undefined;\r\n  };\r\n\r\n  private emitSelectedEvent(item) {\r\n    this.athSelected.emit(item);\r\n  }\r\n\r\n  private scrollItems(direction: 'left' | 'right') {\r\n    if (this.itemGroup) {\r\n      const scrollFactor = 0.9;\r\n      const scrollAmount = this.itemGroup.clientWidth * scrollFactor < 250 ? 250 : this.itemGroup.clientWidth * scrollFactor;\r\n      this.itemGroup.scrollBy({\r\n        left: direction === 'left' ? -scrollAmount : scrollAmount,\r\n        behavior: 'smooth',\r\n      });\r\n\r\n      requestAnimationFrame(() => this.updateArrowsVisibility());\r\n    }\r\n  }\r\n\r\n  private getHostClassNames() {\r\n    return {\r\n      'ath-menu-horizontal': true,\r\n      'ath-menu-horizontal--has-divider': this.hasDivider,\r\n      'ath-items': true,\r\n    };\r\n  }\r\n\r\n  private getMenuHorizontalItemItemClassNames(item) {\r\n    return {\r\n      'ath-menu-horizontal-item': true,\r\n      ['ath-menu-horizontal-item--selected']: item.id === this.selectedMenuHorizontalItemId,\r\n      ['ath-menu-horizontal-item--disabled']: item.disabled,\r\n    };\r\n  }\r\n\r\n  private renderLabel = item => {\r\n    if (item.badgeValue) {\r\n      return (\r\n        <ath-badge label={item.badgeLabel} position=\"right\" value={item.badgeValue} max={item.badgeMax} color={item.disabled ? 'disabled' : 'accent'}>\r\n          {item.label}\r\n        </ath-badge>\r\n      );\r\n    } else return item.label;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={this.getHostClassNames()}>\r\n          {this.showArrows && !this.isLeftArrowHidden && (\r\n            <div class=\"ath-menu-horizontal__button ath-menu-horizontal__button-left\" aria-hidden=\"true\">\r\n              <FcButtonComp\r\n                icon=\"chevron_left\"\r\n                color=\"default\"\r\n                iconPosition={ButtonIconPosition.IconOnly}\r\n                size={IconSize.Small}\r\n                onClick={() => this.scrollItems('left')}\r\n                aria-hidden=\"true\"\r\n                tabindex={-1}\r\n              ></FcButtonComp>\r\n            </div>\r\n          )}\r\n\r\n          <nav class=\"ath-menu-horizontal--item-group\" ref={el => (this.itemGroup = el as HTMLElement)} onScroll={() => this.updateArrowsVisibility()}>\r\n            <ul class=\"ath-menu-horizontal--item-group--list\" role=\"menubar\" aria-label={this.athAriaLabel}>\r\n              {this.menuHorizontalItems.map((item, i) => (\r\n                <li\r\n                  class={{\r\n                    'last-item--padding-right': i === this.menuHorizontalItems.length - 1,\r\n                    'ath-menu-horizontal--item-group--list--item': true,\r\n                  }}\r\n                  role=\"none\"\r\n                >\r\n                  <a\r\n                    role=\"menuitem\"\r\n                    id={item.id}\r\n                    href={item.href}\r\n                    target={`_${item.target}`}\r\n                    aria-disabled={item.disabled ? 'true' : 'false'}\r\n                    tabindex={item.id === this.selectedMenuHorizontalItemId ? '0' : '-1'}\r\n                    aria-current={item.id === this.selectedMenuHorizontalItemId ? 'page' : undefined}\r\n                    class={this.getMenuHorizontalItemItemClassNames(item)}\r\n                    onClick={e => this.handleItemClick(e, item)}\r\n                    onKeyDown={event => this.handleKeyDown(event, item)}\r\n                    onFocus={this.handleItemFocus}\r\n                  >\r\n                    <div class=\"ath-menu-horizontal-item--content\">\r\n                      <span class=\"ath-menu-horizontal-label\">{this.renderLabel(item)}</span>\r\n                      {item.id === this.selectedMenuHorizontalItemId && item.id === this.activeMenuHorizontalItemId && <span class=\"sr-only\"> seleccionado</span>}\r\n                    </div>\r\n\r\n                    {item.target === 'blank' && <span class=\"sr-only ath-external-label\">{' ' + item.externalLabel}</span>}\r\n                    <div class={{ 'ath-menu-horizontal-item--indicator': this.selectedMenuHorizontalItemId === item.id }}></div>\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n\r\n          {this.showArrows && !this.isRightArrowHidden && (\r\n            <div class=\"ath-menu-horizontal__button ath-menu-horizontal__button-right\" aria-hidden=\"true\">\r\n              <FcButtonComp\r\n                icon=\"chevron_right\"\r\n                color=\"default\"\r\n                iconPosition={ButtonIconPosition.IconOnly}\r\n                size={IconSize.Small}\r\n                onClick={() => this.scrollItems('right')}\r\n                buttonAriaLabel=\"Mostrar más pestañas hacia la derecha\"\r\n                aria-hidden=\"true\"\r\n                tabindex={-1}\r\n              ></FcButtonComp>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}