{"version":3,"file":"fc-input-element-C4nNdhc7.js","sources":["src/sharedfc/input/input-element/fc-input-element.tsx"],"sourcesContent":["import { FunctionalComponent, h } from '@stencil/core';\r\nimport { attrBoolean, attrNumber, attrString, Icons, IconSize, IconSizeTypes } from '@utils/helper';\r\nimport { ButtonIconPosition } from 'components/button/button.model';\r\nimport { InputFeedbackTypes } from 'components/input-text/input-text.model';\r\nimport { FcButtonComp } from '../button-comp/fc-button-comp';\r\nimport { IconColor } from 'components/icon/icon.model';\r\n\r\nexport type FcInputElementType = {\r\n  inputId: string;\r\n  icon?: string;\r\n  iconPosition?: string;\r\n  type?: string;\r\n  autocomplete?: string;\r\n  name?: string;\r\n  pattern?: string;\r\n  placeholder?: string;\r\n  value: string;\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  readonly?: boolean;\r\n  maxlength?: number;\r\n  min?: number;\r\n  max?: number;\r\n  step?: number;\r\n  inputAriaLabel?: string;\r\n  buttonAriaLabel?: string;\r\n  hasButton?: boolean;\r\n  buttonIcon?: string;\r\n  showButtonWhenEmpty?: boolean;\r\n  showButtonWhenDisabled?: boolean;\r\n  showButtonWhenReadonly?: boolean;\r\n  labelId?: string;\r\n  helperText?: string;\r\n  helperId?: string;\r\n  helperTextSROnly?: string;\r\n  helperIdSROnly?: string;\r\n  feedback?: string;\r\n  feedbackText?: string;\r\n  feedbackId?: string;\r\n  tabindex?: string;\r\n  size?: IconSizeTypes;\r\n  unit?: string;\r\n  unitAriaLabel?: string;\r\n  ariaActiveDescendant?: string;\r\n  ariaExpanded?: boolean;\r\n  ariaControls?: string;\r\n  ariaHaspopup?: string;\r\n  role?: string;\r\n  onKeyDown?: (e?: KeyboardEvent) => void;\r\n  onInput: (e?) => void;\r\n  onFocus: () => void;\r\n  onBlur: (e?) => void;\r\n  onChange: () => void;\r\n  onClickButton?: () => void;\r\n\r\n  onInputRef: (el: HTMLInputElement) => void;\r\n};\r\n\r\nconst getInputContainerClass = (props: FcInputElementType) => ({\r\n  'ath-input__field': true,\r\n  [`ath-input__field--${props.feedback}`]: !!props.feedback,\r\n  'ath-input__field--readonly': props.readonly,\r\n  'ath-input__field--disabled': props.disabled,\r\n  [`ath-input__field--size-${props.size}`]: !!props.size,\r\n});\r\n\r\nconst getUnitClass = (props: FcInputElementType) => ({\r\n  'ath-input--unit': true,\r\n  [`ath-input--unit--disabled`]: props.disabled,\r\n});\r\n\r\nconst getAriaDescribedBy = (props: FcInputElementType) => {\r\n  const inputHintId = props.helperId ?? `${props.inputId}-hint`;\r\n  const inputHintSROnlyId = props.helperIdSROnly ?? `${props.inputId}-hintSROnly`;\r\n  const inputFeedbackId = props.feedbackId ?? `${props.inputId}-feedback`;\r\n\r\n  const descriptions: { [key: string]: string } = {};\r\n\r\n  if (!!props.helperText) descriptions[inputHintId] = inputHintId;\r\n  if (!!props.helperTextSROnly) descriptions[inputHintSROnlyId] = inputHintSROnlyId;\r\n  if (props.feedback != 'none' && !!props.feedbackText) descriptions[inputFeedbackId] = inputFeedbackId;\r\n\r\n  return descriptions;\r\n};\r\n\r\nconst getInputAttributes = (props: FcInputElementType) => {\r\n  const inputUnitId = `${props.inputId}-unit`;\r\n  const ariaDescribedBy = Object.keys(getAriaDescribedBy(props)).join(' ') == '' ? undefined : Object.keys(getAriaDescribedBy(props)).join(' ');\r\n  const ariaLabelledBy = props.unit && props.labelId ? `${props.labelId} ${props.inputId} ${inputUnitId}` : '';\r\n  const role = props.role ?? undefined;\r\n\r\n  return {\r\n    'id': attrString(props.inputId),\r\n    'icon': attrString(props.icon),\r\n    'iconPosition': attrString(props.iconPosition),\r\n    'type': attrString(props.type === 'search' ? 'text' : props.type),\r\n    'labelClearButton': attrString(props.buttonAriaLabel),\r\n    'maxlength': attrNumber(props.maxlength),\r\n    'disabled': props.disabled,\r\n    'readonly': props.readonly && !props.disabled,\r\n    'tabindex': props.disabled ? '-1' : props.tabindex,\r\n    'autocomplete': attrString(props.autocomplete),\r\n    'min': attrNumber(props.min),\r\n    'max': attrNumber(props.max),\r\n    'step': attrNumber(props.step),\r\n    'name': attrString(props.name),\r\n    'pattern': attrString(props.pattern),\r\n    'placeholder': attrString(props.placeholder),\r\n    'value': attrString(props.value, true),\r\n    'aria-label': attrString(props.inputAriaLabel),\r\n    'aria-labelledby': attrString(ariaLabelledBy),\r\n    'aria-required': attrBoolean(props.required, false),\r\n    'aria-invalid': attrBoolean(props.feedback === InputFeedbackTypes.Error, false),\r\n    'aria-describedby': attrString(ariaDescribedBy, false),\r\n    'aria-disabled': attrBoolean(props.disabled, false),\r\n    'aria-readonly': attrBoolean(props.readonly, false),\r\n    'aria-activedescendant': attrString(props.ariaActiveDescendant),\r\n    'role': role,\r\n    'aria-expanded': attrBoolean(props.ariaExpanded),\r\n    'aria-controls': attrString(props.ariaControls),\r\n    'aria-haspopup': attrString(props.ariaHaspopup),\r\n  };\r\n};\r\n\r\nconst getIconRight = (props: FcInputElementType) => {\r\n  if (props.type === 'search') {\r\n    return Icons.Search;\r\n  }\r\n\r\n  return props.iconPosition === 'right' && props.icon ? props.icon : undefined;\r\n};\r\n\r\nconst isEmptyValue = (value: string) => {\r\n  return (value || '').trim().length === 0;\r\n};\r\n\r\nconst showInputButton = (props: FcInputElementType) => {\r\n  if (!props.hasButton) {\r\n    return false;\r\n  }\r\n\r\n  if (isEmptyValue(props.value) && !props.showButtonWhenEmpty) {\r\n    return false;\r\n  }\r\n\r\n  if (props.disabled && !props.showButtonWhenDisabled) {\r\n    return false;\r\n  }\r\n\r\n  if (props.readonly && !props.showButtonWhenReadonly) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const FcInputElement: FunctionalComponent<FcInputElementType> = props => {\r\n  const inputAttributes = getInputAttributes(props);\r\n  const iconRight = getIconRight(props);\r\n  const iconButton = props.buttonIcon || Icons.InputClearValue;\r\n  const showButton = showInputButton(props);\r\n  const inputUnitId = `${props.inputId}-unit`;\r\n\r\n  return (\r\n    <div class={getInputContainerClass(props)}>\r\n      {!!props.icon && props.iconPosition === 'left' && <ath-icon icon={props.icon} size=\"md\"></ath-icon>}\r\n      <input\r\n        class=\"ath-input__text--value\"\r\n        ref={(el: HTMLInputElement) => props.onInputRef(el)}\r\n        {...inputAttributes}\r\n        onInput={props.onInput}\r\n        onFocus={props.onFocus}\r\n        onBlur={props.onBlur}\r\n        onChange={props.onChange}\r\n        onKeyDown={props.onKeyDown}\r\n      />\r\n      {!!props.unit && (\r\n        <span id={inputUnitId} class={getUnitClass(props)}>\r\n          <span aria-hidden=\"true\">{props.unit}</span> <span class=\"ath-visibility-hidden\">{props.unitAriaLabel || props.unit}</span>\r\n        </span>\r\n      )}\r\n      {showButton && (\r\n        <FcButtonComp\r\n          buttonAriaLabel={props.buttonAriaLabel}\r\n          color={props.disabled ? IconColor.Disabled : IconColor.Default}\r\n          disabled={props.disabled || props.readonly}\r\n          icon={iconButton}\r\n          iconPosition={ButtonIconPosition.IconOnly}\r\n          size={IconSize.Extrasmall}\r\n          onClick={props.onClickButton}\r\n        ></FcButtonComp>\r\n      )}\r\n      {iconRight && <ath-icon icon={iconRight} size={IconSize.Medium}></ath-icon>}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}