{"version":3,"file":"ath-text.entry.js","sources":["src/components/text/text.model.ts","src/components/text/text.scss?tag=ath-text&encapsulation=shadow","src/components/text/text.tsx"],"sourcesContent":["export type AthTextColor = 'default' | 'inverse' | 'primary' | 'accent' | 'subtle' | 'disabled';\r\n\r\nexport const TextColor = {\r\n  Default: 'default',\r\n\tInverse: 'inverse',\r\n\tPrimary: 'primary',\r\n\tAccent: 'accent',\r\n\tSubtle: 'subtle',\r\n\tDisabled: 'disabled',\r\n} as const;\r\n\r\nexport interface AthTextModel {\r\n\t/** Número máximo de líneas a mostrar. Si no se especifica, se usa el valor por defecto. */\r\n\tlines?: number;\r\n\r\n\t/** Texto del componente (alternativa al slot). */\r\n\tcontent?: string;\r\n\r\n\t/** Mostrar tooltip con el texto completo si está truncado. */\r\n\twithTooltip?: boolean;\r\n\r\n\t/** Número de columnas que se muestra */\r\n\tcolumns?: AthTextColumns;\r\n\r\n\t/** Define semánticamente la jerarquías del texto: p, h1, h2, h3, h4, h5, h6 */\r\n\thierarchy?: 'p' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\r\n\r\n\t/** Color semántico del texto. */\r\n\tcolor?: AthTextColor;\r\n}\r\n\r\nexport interface AthTextColumns {\r\n  numColumns: number;\r\n  spacing?: string;\r\n}\r\n\r\nexport const defaultAthTextModel: Required<Pick<AthTextModel, 'lines' | 'color' | 'withTooltip' | 'columns' | 'hierarchy'>> = {\r\n\tlines: 0,\r\n\tcolor: 'default',\r\n\twithTooltip: true,\r\n\tcolumns: {\r\n\t\tnumColumns: 1,\r\n\t\tspacing: '16px',\r\n\t},\r\n\thierarchy: 'p',\r\n};\r\n\r\nexport const CSS_VARS = {\r\n\tCOLOR: '--color',\r\n\tLINES: '--text-lines',\r\n\tCOLUMNS: '--ath-text-columns',\r\n  \tCOLUMN_GAP: '--ath-text-column-gap',\r\n} as const;","@use 'utilities';\r\n@use 'tools';\r\n@use './text.theme.scss';\r\n\r\n:host {\r\n  display: inline-block;\r\n  width: 100%;\r\n\r\n  .ath-text-container {\r\n    display: block;\r\n    width: 100%;\r\n\r\n    .ath-text {\r\n      margin: 0;\r\n      padding: 0;\r\n      font-size: var(--ath-text-font-size, 12px);\r\n      line-height: var(--ath-text-line-height, 1.4);\r\n      word-break: break-word;\r\n    }\r\n\r\n    .ath-text--clamp {\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      -webkit-line-clamp: var(--text-lines, 2);\r\n      line-clamp: var(--text-lines, 2);\r\n    }\r\n\r\n    .ath-text--columns {\r\n      column-count: var(--ath-text-columns, 1);\r\n      column-gap: var(--ath-text-column-gap, 1.5rem);\r\n      column-fill: balance;\r\n      gap: var(--ath-text-column-gap, 1rem);\r\n      -webkit-box-orient: initial;\r\n      overflow: visible;\r\n    }\r\n\r\n    .story__row {\r\n      display: flex;\r\n      gap: 16px;\r\n      align-items: flex-start;\r\n      justify-content: center;\r\n    }\r\n  }\r\n}\r\n\r\n:host([hierarchy='p']) .ath-text {\r\n  font-size: var(--ath-text-font-size-p);\r\n  font-weight: var(--ath-text-font-weight-p);\r\n}\r\n:host([hierarchy='h1']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h1);\r\n  font-weight: var(--ath-text-font-weight-h1);\r\n}\r\n:host([hierarchy='h2']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h2);\r\n  font-weight: var(--ath-text-font-weight-h2);\r\n}\r\n:host([hierarchy='h3']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h3);\r\n  font-weight: var(--ath-text-font-weight-h3);\r\n}\r\n:host([hierarchy='h4']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h4);\r\n  font-weight: var(--ath-text-font-weight-h4);\r\n}\r\n:host([hierarchy='h5']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h5);\r\n  font-weight: var(--ath-text-font-weight-h5);\r\n}\r\n:host([hierarchy='h6']) .ath-text {\r\n  font-size: var(--ath-text-font-size-h6);\r\n  font-weight: var(--ath-text-font-weight-h6);\r\n}","import { Component, ComponentInterface, Host, Prop,h, Element, State, Watch, } from '@stencil/core';\r\nimport { AthTextColor, TextColor, defaultAthTextModel, CSS_VARS, AthTextColumns } from './text.model';\r\n\r\n@Component({\r\n  tag: 'ath-text',\r\n  styleUrls: ['text.scss'],\r\n  shadow: true,\r\n})\r\nexport class AthText implements ComponentInterface {\r\n  /**\r\n   * Texto dentro del componente\r\n   **/\r\n  @Prop() content: string;\r\n\r\n  /**\r\n   * Número de líneas máximo a mostrar\r\n   **/\r\n  @Prop() lines?: number;\r\n\r\n  /**\r\n   * Mostrar tooltip con el contenido completo cuando el texto aparece truncado\r\n   */\r\n  @Prop() withTooltip?: boolean;\r\n\r\n  /**\r\n   * Número de columnas y espaciado que se muestran\r\n   */\r\n  @Prop() columns?: AthTextColumns | string;\r\n\r\n  /**\r\n   * Define semánticamente la jerarquías del texto: p, h1, h2, h3...\r\n   */\r\n  @Prop() hierarchy: 'p' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' = defaultAthTextModel.hierarchy;\r\n\r\n  /**\r\n   * Define color del texto: default, inverse, primary, accent, subtle\r\n   */\r\n  @Prop({ reflect: true }) color: AthTextColor = TextColor.Default;\r\n\r\n\r\n  @Element() hostEl!: HTMLElement;\r\n\r\n  private pEl: HTMLElement | null = null;\r\n\r\n  /**\r\n   * Estado interno para saber si el texto está truncado\r\n   */\r\n  @State() private isTruncated = true;\r\n\r\n  private getClassNames = () => ({\r\n    'ath-text': true,\r\n    'ath-text--container': true,\r\n    [`ath-color-text--${this.color}`]: !!this.color,\r\n  });\r\n\r\n  private getEffectiveLines(): number {\r\n    const n = Number(this.lines);\r\n\r\n    if (!isNaN(n) && n > 0) {\r\n      return n;\r\n    }\r\n\r\n    return defaultAthTextModel.lines;\r\n  }\r\n\r\n  private get inlineStyle() {\r\n    const linesVal = this.getEffectiveLines();\r\n    const css: any = {};\r\n\r\n    if (linesVal && linesVal > 0) {\r\n      css[CSS_VARS.LINES] = `${linesVal}`;\r\n    }\r\n\r\n    return css;\r\n  }\r\n\r\n  private get normalizedColumns() {\r\n    const def = defaultAthTextModel.columns;\r\n    let cfg: AthTextColumns | undefined;\r\n\r\n    if (typeof this.columns === 'string') {\r\n      try {\r\n        cfg = JSON.parse(this.columns) as AthTextColumns;\r\n      } catch {\r\n        cfg = undefined;\r\n      }\r\n    } else {\r\n      cfg = this.columns;\r\n    }\r\n\r\n    return {\r\n      numColumns: cfg?.numColumns ?? def.numColumns,\r\n      spacing: cfg?.spacing ?? def.spacing,\r\n    };\r\n  }\r\n\r\n  private get isTooltipEnabled(): boolean {\r\n    return this.withTooltip === true;\r\n  }\r\n\r\n  private scheduleTruncationUpdate() {\r\n    requestAnimationFrame(() => this.updateTruncation());\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.pEl = this.hostEl.shadowRoot?.querySelector( '.ath-text', ) as HTMLElement | null;\r\n\r\n    this.scheduleTruncationUpdate();\r\n    window.addEventListener('resize', this.onResize);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener('resize', this.onResize);\r\n  }\r\n\r\n  private onResize = () => {\r\n    this.scheduleTruncationUpdate();\r\n  };\r\n\r\n  @Watch('lines')\r\n  handleLinesChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('content')\r\n  handleContentChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('columns')\r\n  handleColumnsChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  @Watch('hierarchy')\r\n  handleTruncationChange() {\r\n    this.scheduleTruncationUpdate();\r\n  }\r\n\r\n  private updateTruncation() {\r\n    if (!this.pEl) {\r\n      this.isTruncated = false;\r\n      return;\r\n    }\r\n\r\n    const truncated =\r\n      this.pEl.scrollHeight > this.pEl.clientHeight + 1 ||\r\n      this.pEl.scrollWidth > this.pEl.clientWidth + 1;\r\n\r\n    if (truncated !== this.isTruncated) {\r\n      this.isTruncated = truncated;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { numColumns, spacing } = this.normalizedColumns;\r\n\r\n    const textContent = this.content ?? <slot></slot>;\r\n    const tooltipText = this.content ?? '';\r\n\r\n    const linesVal = Number(this.lines);\r\n    const effectiveLines = !isNaN(linesVal) && linesVal > 0 ? linesVal : defaultAthTextModel.lines;\r\n\r\n    const hasLines = effectiveLines > 0;\r\n    const hasColumns = typeof numColumns === 'number' && numColumns > 1;\r\n\r\n    const shouldUseColumns = hasColumns;\r\n    const shouldClamp = hasLines && !hasColumns;\r\n\r\n    const style: any = {\r\n      ...this.inlineStyle,\r\n    };\r\n\r\n    if (shouldUseColumns) {\r\n      style[CSS_VARS.COLUMNS] = String(numColumns);\r\n      style[CSS_VARS.COLUMN_GAP] = spacing;\r\n    }\r\n\r\n    const Tag = (this.hierarchy || 'p') as any;\r\n\r\n    const textElement = (\r\n      <Tag\r\n        class={{\r\n          ...this.getClassNames(),\r\n          'ath-text--columns': shouldUseColumns, \r\n          'ath-text--clamp': shouldClamp,\r\n        }}\r\n        style={style}\r\n      >\r\n        {textContent}\r\n      </Tag>\r\n    );\r\n    const shouldShowTooltip = this.isTooltipEnabled && this.isTruncated;\r\n\r\n    const content = shouldShowTooltip ? (\r\n      <ath-tooltip headingText={tooltipText} position=\"bottom\" trigger=\"hover\" maxWidth={750}>\r\n        {textElement}\r\n      </ath-tooltip>\r\n    ) : (\r\n      textElement\r\n    );\r\n\r\n    return (\r\n      <Host>\r\n        <div class=\"ath-text-container\">\r\n          {content}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}  \r\n"],"names":[],"mappings":"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"}