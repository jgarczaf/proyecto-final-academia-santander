{"version":3,"file":"ath-chip-choice-group.entry.cjs.js","sources":["src/components/chip-choice/chip-choice-group/chip-choice-group.scss?tag=ath-chip-choice-group&encapsulation=shadow","src/components/chip-choice/chip-choice-group/chip-choice-group.tsx"],"sourcesContent":[":host {\r\n  display: flex;\r\n  align-items: center;\r\n  align-content: center;\r\n  gap: var(--ath-spacing-chip-group-row-gap) var(--ath-spacing-chip-group-col-gap);\r\n  flex-wrap: wrap;\r\n\r\n  width: 100%;\r\n}\r\n","import { Component, ComponentInterface, JSX, Host, Prop, h, Element, Listen, Event, EventEmitter, AttachInternals, Watch } from '@stencil/core';\r\nimport { ChipChoiceSize, ChipChoiceSizes } from '../chip-choice.model';\r\n\r\n@Component({\r\n  tag: 'ath-chip-choice-group',\r\n  styleUrls: ['chip-choice-group.scss'],\r\n  shadow: true,\r\n  formAssociated: true,\r\n})\r\nexport class AthChipChoiceGroup implements ComponentInterface {\r\n  @Element() el: HTMLAthChipChoiceGroupElement;\r\n\r\n  @AttachInternals() internals: ElementInternals;\r\n\r\n  /**\r\n   * Weather the chips are disabled\r\n   */\r\n  @Prop() disabled = false;\r\n\r\n  /**\r\n   * Allow multiple selection of chips\r\n   */\r\n  @Prop() multiple = false;\r\n\r\n  /**\r\n   * The generic name for the chips\r\n   */\r\n  @Prop() name: string;\r\n\r\n  /**\r\n   * The generic size of the chips\r\n   */\r\n  @Prop() size: ChipChoiceSizes = ChipChoiceSize.Medium;\r\n\r\n  /**\r\n   * The width of the group\r\n   */\r\n  @Prop() width: string;\r\n\r\n  /**\r\n   * The value for not multiple (use chip-choice-group as radio-group)\r\n   */\r\n  @Prop({ mutable: true }) value: string;\r\n\r\n  @Watch('value')\r\n  watchValueHandler(newValue: string) {\r\n    this.selectByValue(newValue);\r\n  }\r\n\r\n  /**\r\n   * Event to emit the current chips checked\r\n   */\r\n  @Event() athChangeValue: EventEmitter<HTMLAthChipChoiceElement[]>;\r\n\r\n  @Listen('athChange')\r\n  handleChange(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    if (this.multiple) {\r\n      this.selectedChip = this.getChipIndex(e.detail);\r\n    } else {\r\n      this.selectByValue(e.detail.value);\r\n      this.setValue();\r\n    }\r\n    this.emitCheckedChips();\r\n  }\r\n\r\n  @Listen('keydown')\r\n  handleMouseDown(e: KeyboardEvent) {\r\n    switch (e.code) {\r\n      case 'ArrowLeft':\r\n        this.movePreviousChip();\r\n        break;\r\n\r\n      case 'ArrowRight':\r\n        this.moveNextChip();\r\n        break;\r\n\r\n      case 'Home':\r\n        this.selectFocusChip(this.firstEnabledChip);\r\n        break;\r\n      case 'End':\r\n        this.selectFocusChip(this.lastEnabledChip);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private chips: Array<HTMLAthChipChoiceElement> = [];\r\n  private selectedChip: number;\r\n  private firstEnabledChip: number;\r\n  private lastEnabledChip: number;\r\n  private initialValue: string;\r\n\r\n  componentDidLoad(): void {\r\n    this.loadChips();\r\n    this.propagateAttributes();\r\n    this.initialValue = this.value;\r\n\r\n    if (this.value) {\r\n      this.selectByValue(this.value);\r\n      this.setInputValue(this.value);\r\n    } else {\r\n      this.setFocusFirstChip();\r\n    }\r\n  }\r\n\r\n  formResetCallback() {\r\n    this.value = this.initialValue;\r\n    this.selectByValue(this.value);\r\n    this.setInputValue(this.initialValue);\r\n    this.emitCheckedChips();\r\n  }\r\n\r\n  private loadChips(): void {\r\n    this.chips = this.getChips();\r\n    this.firstEnabledChip = this.getFirstEnabledChip();\r\n    this.lastEnabledChip = this.getLastEnabledChip();\r\n  }\r\n\r\n  private setFocusFirstChip() {\r\n    const firstChecked = this.getFirstCheckedChip();\r\n    this.selectFocusChip(firstChecked > -1 ? firstChecked : this.firstEnabledChip);\r\n  }\r\n\r\n  private getChips(): Array<HTMLAthChipChoiceElement> {\r\n    const chipsElements = this.el.querySelectorAll('ath-chip-choice');\r\n    const chips = [];\r\n\r\n    if (chipsElements) {\r\n      chipsElements.forEach(chip => {\r\n        chips.push(chip);\r\n      });\r\n    }\r\n\r\n    return chips;\r\n  }\r\n\r\n  private propagateAttributes() {\r\n    if (this.chips) {\r\n      this.chips.forEach(chip => {\r\n        this.propagateAttribute(chip);\r\n      });\r\n    }\r\n  }\r\n\r\n  private propagateAttribute(chip: HTMLAthChipChoiceElement) {\r\n    if (!chip) {\r\n      return;\r\n    }\r\n\r\n    chip.role = this.multiple ? 'checkbox' : 'radio';\r\n\r\n    // Boolean attibute propagate only for true\r\n    if (this.disabled) {\r\n      chip.disabled = true;\r\n    }\r\n\r\n    if (this.size && !chip.hasAttribute('size')) {\r\n      chip.setAttribute('size', this.size);\r\n    }\r\n\r\n    if (this.name && this.multiple) {\r\n      chip.setAttribute('name', this.name);\r\n    } else {\r\n      chip.removeAttribute('name');\r\n    }\r\n  }\r\n\r\n  private getFirstEnabledChip(): number {\r\n    return this.chips.findIndex(chip => !chip.disabled);\r\n  }\r\n\r\n  private getLastEnabledChip(): number {\r\n    for (let index = this.chips.length - 1; index >= 0; index--) {\r\n      if (!this.chips[index].disabled) {\r\n        return index;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  private getFirstCheckedChip(): number {\r\n    const index = this.chips.findIndex(chip => chip.selected && !chip.disabled);\r\n    return index;\r\n  }\r\n\r\n  private getChipIndex(chip: HTMLAthChipChoiceElement) {\r\n    return this.chips.findIndex(item => item === chip);\r\n  }\r\n\r\n  private getHostStyles() {\r\n    return {\r\n      width: this.width || undefined,\r\n    };\r\n  }\r\n\r\n  private moveNextChip() {\r\n    const next = this.chips.findIndex((chip, index) => index > this.selectedChip && !chip.disabled);\r\n    this.selectFocusChip(next === -1 ? this.firstEnabledChip : next);\r\n  }\r\n\r\n  private movePreviousChip() {\r\n    let prevIndex = this.selectedChip - 1;\r\n\r\n    while (prevIndex >= 0 && this.chips[prevIndex].disabled) {\r\n      prevIndex--;\r\n    }\r\n\r\n    this.selectFocusChip(prevIndex === -1 ? this.lastEnabledChip : prevIndex);\r\n  }\r\n\r\n  private selectFocusChip(index: number) {\r\n    this.selectedChip = index;\r\n    this.chips.forEach(chip => {\r\n      chip.unselect();\r\n    });\r\n    this.chips[this.selectedChip].select();\r\n  }\r\n\r\n  private selectByValue(value: string): void {\r\n    if (!this.multiple) {\r\n      this.unCheckAllChips();\r\n      const selectedIndex = this.chips.findIndex(chip => chip.value === value);\r\n      this.selectedChip = selectedIndex;\r\n      if (selectedIndex !== -1) {\r\n        this.chips[selectedIndex].selected = true;\r\n        this.chips[selectedIndex].select();\r\n      }\r\n    }\r\n  }\r\n\r\n  private unCheckAllChips() {\r\n    this.chips.forEach(chip => {\r\n      chip.selected = false;\r\n      chip.unselect();\r\n    });\r\n  }\r\n\r\n  private emitCheckedChips(): void {\r\n    const chips = this.chips.filter(chip => chip.selected);\r\n    this.athChangeValue.emit(chips);\r\n  }\r\n\r\n  private setValue() {\r\n    if (!this.multiple) {\r\n      const value = this.selectedChip > -1 ? this.chips[this.selectedChip].value : '';\r\n      this.value = value;\r\n      this.setInputValue(value);\r\n    }\r\n  }\r\n\r\n  private setInputValue(value: string): void {\r\n    if (!this.multiple && this.internals && 'setFormValue' in this.internals) {\r\n      this.internals.setFormValue(value);\r\n      this.internals.checkValidity();\r\n    }\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    return (\r\n      <Host role={this.multiple ? 'group' : 'radiogroup'} style={this.getHostStyles()}>\r\n        <slot />\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":["ChipChoiceSize","h","Host"],"mappings":"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"}