import{r as t,c as o,a,h as e,H as i}from"./p-D2-yfY-d.js";import{a as r,b as s}from"./p-D0e48E4w.js";var n;(function(t){t["Left"]="left";t["Right"]="right"})(n||(n={}));const l=".ath-scroll{overflow:auto}.ath-overflow-hidden{overflow:hidden}.ath-overflow-x-hidden{overflow-x:hidden}.ath-overflow-y-hidden{overflow-y:hidden}@supports (-moz-appearance: none){.ath-scroll{scrollbar-width:thin;scrollbar-color:var(--ath-color-bg-alpha-bolder-default) var(--ath-color-scroll-track-bg)}.ath-scroll:hover{scrollbar-color:var(--ath-color-bg-alpha-bolder-hovered) var(--ath-color-scroll-track-bg)}}.ath-scroll::-webkit-scrollbar{width:var(--ath-sizing-scroll);height:var(--ath-sizing-scroll)}.ath-scroll::-webkit-scrollbar-track{background-color:var(--ath-color-scroll-track-bg)}.ath-scroll::-webkit-scrollbar-thumb{background-color:var(--ath-color-bg-alpha-bolder-default);border-radius:var(--ath-border-radius-scroll)}.ath-scroll::-webkit-scrollbar-thumb:hover{background-color:var(--ath-color-bg-alpha-bolder-hovered)}.ath-scroll::-webkit-scrollbar-button{display:none}:host{display:inline-flex;flex-direction:column;align-items:flex-start}:host .ath-menu-button-container{position:relative}:host .ath-menu-button-container .ath-menu-button-disabled{pointer-events:none}:host .ath-menu-button-container .ath-menu-button-overlay{position:absolute;display:inline-flex;padding:var(--ath-spacing-menu-button-overlay-padding);padding-right:calc(var(--ath-spacing-menu-button-overlay-padding) / 2);flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-menu-button-overlay-row-gap);border-radius:var(--ath-border-radius-3xl);border:var(--ath-border-width-xs) solid var(--ath-color-border-alpha-bolder-default);background:var(--ath-color-menu-button-overlay-bg);margin-top:4px;z-index:1000}:host .ath-menu-button-container .ath-menu-button-overlay-wrapper{padding-right:calc(var(--ath-spacing-menu-button-overlay-padding) / 2)}:host .ath-menu-button-container .position--right{right:0px}:host .ath-menu-button-container .position--left{left:0px}";let h=0;const c=class{constructor(a){t(this,a);this.athAction=o(this,"athAction")}hostId=++h;overlayId=`menu-button--overlay-${this.hostId}`;get el(){return a(this)}alignment=n.Left;autofocus;clear;color=r.Primary;disabled;icon="placeholder";open;size=s.Medium;overlayMaxHeight;athAriaLabel;athAction;justOpen=false;clickOutside(t){const o=t.composedPath();if(!o.includes(this.el)){this.open=false}}handleClick=t=>{t.stopPropagation();this.open=!this.open;this.justOpen=!this.justOpen;if(!this.disabled&&this.open){const t=Array.from(this.el.querySelectorAll("ath-menu-button-item"));const o=t.find((t=>!t.hasAttribute("disabled")));if(o){t.forEach((t=>{t.itemTabIndex=t===o?0:-1}));o.focus()}}};componentDidLoad(){if(this.autofocus&&!this.disabled){this.setFocusToAthButton()}if(this.open&&!this.disabled){this.setFocusToAthButton()}const t=Array.from(this.el.querySelectorAll("ath-menu-button-item"));t.map((t=>t.tabIndex=-1));const o=t.map((t=>t));this.manageGroups(o)}setFocusToAthButton(){const t=this.el.shadowRoot.querySelector("ath-button");t.focus()}manageGroups(t){const o=this.groupBy(t,(t=>t.getAttribute("group-name")));const a=Array.from(t);const e=a[0];const i=a[a.length-1];let r=null;for(const t in o){const a=o[t];const s=a[0];const n=a[a.length-1];if(s&&n){const o=document.createElement("ath-divider");o.setAttribute("style","width: 100%");if(s!==e&&r!==t&&s.parentNode){const t=s.previousElementSibling;if(!t||!t.matches("ath-divider")){s.parentNode.insertBefore(o.cloneNode(true),s)}}if(n!==i&&n.parentNode){n.parentNode.insertBefore(o.cloneNode(true),n.nextSibling)}const l=document.createElement("div");l.setAttribute("role","group");l.setAttribute("aria-label",t);l.setAttribute("style","display: contents;");s.parentNode.insertBefore(l,s);a.forEach((t=>{l.appendChild(t)}));r=t}}}groupBy(t,o){return t.reduce(((t,a)=>{const e=o(a);if(e){if(!t[e]){t[e]=[]}t[e].push(a)}return t}),{})}onClick(t){this.open=false;this.justOpen=false;this.setFocusToAthButton();if(t.detail){this.athAction.emit(t.detail.target)}t.stopPropagation()}handleKeyDown(t){if(t.key==="Escape"&&this.open){t.preventDefault();this.open=false;this.setFocusToAthButton()}if(t.key==="Tab"&&this.open){this.open=false}this.focusManager(t)}focusManager(t){const o=Array.from(this.el.querySelectorAll("ath-menu-button-item")).filter((t=>!t.hasAttribute("disabled")));const a=document.activeElement;const e=o.indexOf(a);let i;if(t.key==="ArrowDown"){t.preventDefault();i=(e+1)%o.length}else if(t.key==="ArrowUp"){t.preventDefault();if(e===-1){i=o.length-1}else{i=(e-1+o.length)%o.length}}else if(t.key==="Home"){t.preventDefault();i=0}else if(t.key==="End"){t.preventDefault();i=o.length-1}if(i!==undefined){o.forEach(((t,o)=>{t.itemTabIndex=o===i?0:-1}));o[i].focus()}}getButtonClassNames=()=>({"ath-menu-button-disabled":!!this.disabled});getOverlayClassNames=()=>({"ath-menu-button-overlay":true,[`position--${this.alignment}`]:!!this.alignment});render(){const t=this.overlayMaxHeight?{maxHeight:this.overlayMaxHeight}:{maxHeight:"236px"};return e(i,{key:"0a9a0494d967dbb6246610c8b777d73b0c33d0cb"},e("div",{key:"92b4aca13fe8777363003ebe1ef3fae47c7577b6",class:"ath-menu-button-container"},e("div",{key:"615a3b48960031510834929c54e8c08114340c3e"},e("ath-button",{key:"a6857ff552e75e65b045265326cec90d897b0656",id:"button-menu",autofocus:!!this.autofocus,icon:this.icon,"icon-position":"icon-only",clear:this.clear,color:this.color,disabled:this.disabled,size:this.size,onAthClick:this.handleClick,"aria-controls":this.overlayId,"aria-expanded":!!this.open?"true":"false","aria-haspopup":"true",class:this.getButtonClassNames(),"aria-label":this.athAriaLabel})),this.open&&!this.disabled&&e("div",{key:"52a7974a390eefe8b92ad5757ee678673df56e1f",style:t,class:this.getOverlayClassNames(),id:this.overlayId,role:"menu",tabindex:"-1"},e("div",{key:"868e41290b06bbd370dea4b52813a5be939ebe81",class:"ath-scroll ath-menu-button-overlay-wrapper"},e("slot",{key:"2a3ef70d33fa5de66239b6517290b0a0bc56c15e"})))))}};c.style=l;export{c as ath_menu_button};
//# sourceMappingURL=p-3273d522.entry.js.map