{"version":3,"file":"ath-table.entry.esm.js","sources":["src/components/table/table.scss?tag=ath-table&encapsulation=shadow","src/components/table/table.tsx"],"sourcesContent":["@use 'table.mixins.scss' as mixins;\r\n\r\n:host(.ath-table) {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  min-width: min-content;\r\n  border-radius: var(--ath-border-radius-table-default);\r\n\r\n  .ath-table__header {\r\n    display: flex;\r\n    flex: 0 0 auto;\r\n  }\r\n\r\n  .ath-table__body {\r\n    display: flex;\r\n    flex: 1 1 auto;\r\n  }\r\n\r\n  .ath-table__footer {\r\n    flex: 0 0 auto;\r\n  }\r\n}\r\n:host(:focus),\r\n:host(:focus-visible) {\r\n  box-shadow: 0px 0px 0px 2px var(--ath-color-border-focus);\r\n  display: block;\r\n  outline: none;\r\n}\r\n@include mixins.color('table', 'primary');\r\n@include mixins.color('table', 'secondary');\r\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, Watch, Listen, h } from '@stencil/core';\r\nimport {\r\n  TableSizeType,\r\n  TableSize,\r\n  TableColorType,\r\n  TableColor,\r\n  TableFrozenType,\r\n  TableStripingType,\r\n  TableStriping,\r\n  TableFrozen,\r\n  TableSelectable,\r\n  TableSelectableType,\r\n  TableSelectionChangeEvent,\r\n  TableClickEvent,\r\n  TableSelectAllChangeEvent,\r\n} from './table.model';\r\nimport { CheckboxValue, CheckboxValues } from '../checkbox/checkbox.model';\r\n\r\n@Component({\r\n  tag: 'ath-table',\r\n  styleUrl: 'table.scss',\r\n  shadow: true,\r\n})\r\nexport class AthTable {\r\n  @Element() el!: HTMLElement;\r\n\r\n  /** Row height */\r\n  @Prop() size: TableSizeType = TableSize.Small;\r\n\r\n  /** Table color */\r\n  @Prop() color: TableColorType = TableColor.Primary;\r\n\r\n  /** Fix the first or last column */\r\n  @Prop() frozen: TableFrozenType;\r\n\r\n  /** Enable zebra striping */\r\n  @Prop() striped: TableStripingType = TableStriping.None;\r\n\r\n  /** Row selection mode */\r\n  @Prop() selectable: TableSelectableType = TableSelectable.None;\r\n\r\n  /** Enable clickable rows with action column */\r\n  @Prop() clickable: boolean = false;\r\n\r\n  /** Hides select all checkbox when selectable is multiple */\r\n  @Prop() noSelectAll: boolean = false;\r\n\r\n  /** Fired whenever row selection changes */\r\n  @Event() athSelectionChange: EventEmitter<TableSelectionChangeEvent>;\r\n\r\n  /** Fired when a clickable row is clicked */\r\n  @Event() athTableClick: EventEmitter<TableClickEvent>;\r\n\r\n  // Recalculate last row when any collapse is toggled\r\n  @Listen('athToggleCollapse', { target: 'window' })\r\n  handleCollapseToggle() {\r\n    requestAnimationFrame(() => this.markLastRow());\r\n  }\r\n\r\n  // Handle select all change event\r\n  @Listen('athSelectAllChange')\r\n  handleSelectAllChange(event: CustomEvent<TableSelectAllChangeEvent>) {\r\n    const { selectAll } = event.detail;\r\n    this.rows.forEach(row => {\r\n      row.selected = selectAll;\r\n    });\r\n    this.emitSelectionChange();\r\n  }\r\n\r\n  /** Refresh the table. Useful when dynamically changing content */\r\n  @Method()\r\n  async refresh() {\r\n    this.collectChildren();\r\n  }\r\n\r\n  // Using a timer to defer DOM operations to avoid lifecycle warnings\r\n  private initTimer: number;\r\n\r\n  private headerEl: HTMLAthTableHeaderElement;\r\n  private headerItems: HTMLAthTableHeaderItemElement[] = [];\r\n  private rows: HTMLAthTableRowElement[] = [];\r\n  private selectionName = `ath-table-selection-${Math.random().toString(36).slice(2)}`;\r\n\r\n  private getSelectAllState(): CheckboxValues {\r\n    if (!this.rows || this.rows.length === 0) {\r\n      return CheckboxValue.False;\r\n    }\r\n\r\n    const selectedCount = this.rows.filter(row => row.selected).length;\r\n    const totalCount = this.rows.length;\r\n\r\n    if (selectedCount === 0) {\r\n      return CheckboxValue.False;\r\n    } else if (selectedCount === totalCount) {\r\n      return CheckboxValue.True;\r\n    } else {\r\n      return CheckboxValue.Indeterminate;\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    // Use setTimeout to defer DOM operations to next tick after render is complete\r\n    this.initTimer = window.setTimeout(() => {\r\n      this.collectChildren();\r\n    }, 0);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    // Clear the timer if the component is removed\r\n    if (this.initTimer) {\r\n      clearTimeout(this.initTimer);\r\n    }\r\n  }\r\n\r\n  @Watch('selectable')\r\n  handleSelectableChange() {\r\n    this.collectChildren();\r\n  }\r\n\r\n  @Watch('clickable')\r\n  handleClickableChange() {\r\n    this.collectChildren();\r\n  }\r\n\r\n  private collectChildren() {\r\n    // Find header items\r\n    this.headerEl = this.el.querySelector('ath-table-header');\r\n    if (this.headerEl) {\r\n      this.headerEl.selectable = this.selectable;\r\n      this.headerEl.clickable = this.clickable;\r\n      this.headerEl.noSelectAll = this.noSelectAll;\r\n      if (this.color) this.headerEl.color = this.color;\r\n      if (this.size) this.headerEl.size = this.size;\r\n      if (this.frozen) this.headerEl.frozen = this.frozen;\r\n    }\r\n\r\n    // Find rows\r\n    const rowsContainer = this.el.querySelector('ath-table-body');\r\n    if (rowsContainer) {\r\n      this.rows = Array.from(rowsContainer.querySelectorAll('ath-table-row'));\r\n      // Determine if any row has hierarchical props\r\n      const hasHierarchy = this.rows.some(r => r.hasChildren || r.parentId);\r\n\r\n      // Ensure a collapse container exists after each parent row to host children\r\n      this.ensureParentChildStructure(rowsContainer);\r\n\r\n      this.rows.forEach(row => {\r\n        row.selectable = this.selectable;\r\n        row.selectionGroupName = this.selectionName;\r\n        row.reserveClickable = this.clickable;\r\n        row.reserveExpander = hasHierarchy && !row.hasChildren;\r\n        if (this.color) row.color = this.color;\r\n        if (this.size) row.size = this.size;\r\n        row.removeEventListener('athRowSelectionChange', this.onRowSelectionChange);\r\n        row.addEventListener('athRowSelectionChange', this.onRowSelectionChange);\r\n        row.removeEventListener('athRowClick', this.onRowClick);\r\n        row.addEventListener('athRowClick', this.onRowClick);\r\n      });\r\n    }\r\n\r\n    this.updateChildrenProps();\r\n  }\r\n\r\n  /**\r\n   * Re-groups DOM so that each parent row is followed by an ath-collapse that contains its child rows.\r\n   * Child rows are determined by matching parentId to parent row's rowId.\r\n   */\r\n  private ensureParentChildStructure(container: HTMLAthTableBodyElement) {\r\n    // Collect current rows flat\r\n    const allRows: HTMLAthTableRowElement[] = Array.from(container.querySelectorAll('ath-table-row'));\r\n    if (!allRows.length) return;\r\n\r\n    // Map existing collapse containers by parent id\r\n    const existingCollapses = new Map<string, HTMLAthCollapseElement>();\r\n    Array.from(container.querySelectorAll('ath-collapse')).forEach(col => {\r\n      const id = col.id;\r\n      if (id) existingCollapses.set(id, col);\r\n    });\r\n\r\n    // First, move all child rows to a staging fragment so we can re-insert under parents\r\n    const fragment = document.createDocumentFragment();\r\n    allRows.forEach(r => fragment.appendChild(r));\r\n    container.textContent = '';\r\n\r\n    // Group rows\r\n    const parents = allRows.filter(r => r.hasChildren && !!r.rowId);\r\n    const children = allRows.filter(r => !!r.parentId);\r\n    const childrenByParent = new Map<string, HTMLAthTableRowElement[]>();\r\n    children.forEach(ch => {\r\n      const pid = ch.parentId;\r\n      if (!pid) return;\r\n      const list = childrenByParent.get(pid) || [];\r\n      list.push(ch);\r\n      childrenByParent.set(pid, list);\r\n    });\r\n\r\n    const appendElement = (element: HTMLElement) => container.appendChild(element);\r\n\r\n    // Rows that are neither parent nor child should remain in original order relative to parents.\r\n    for (const row of allRows) {\r\n      const isParent = row.hasChildren && !!row.rowId;\r\n      const isChild = !!row.parentId;\r\n      if (isChild) {\r\n        // Child will be appended inside corresponding collapse later; skip here\r\n        continue;\r\n      }\r\n      if (!isParent) {\r\n        appendElement(row);\r\n        continue;\r\n      }\r\n\r\n      // Append parent row\r\n      appendElement(row);\r\n\r\n      // Create or reuse ath-collapse for this parent\r\n      const collapseId = row.rowId!;\r\n      let collapseEl = existingCollapses.get(collapseId);\r\n      if (!collapseEl) {\r\n        collapseEl = document.createElement('ath-collapse');\r\n        collapseEl.id = collapseId;\r\n        // Show only if parent is expanded\r\n        collapseEl.show = !!row.expanded;\r\n      }\r\n      // Append collapse after parent\r\n      appendElement(collapseEl);\r\n\r\n      // Ensure collapse content wrapper\r\n      const parentChildren = childrenByParent.get(collapseId) || [];\r\n      parentChildren.forEach(ch => {\r\n        collapseEl.appendChild(ch);\r\n      });\r\n    }\r\n\r\n    // Append any leftover children without parents\r\n    const orphanChildren = children.filter(ch => !parents.find(p => p.rowId === ch.parentId));\r\n    orphanChildren.forEach(orphan => appendElement(orphan));\r\n  }\r\n\r\n  private setColumnFixed = items => {\r\n    if (this.frozen === TableFrozen.First && items.length > 0) {\r\n      items[0].frozen = this.frozen;\r\n      if (this.selectable !== TableSelectable.None) {\r\n        items[0].style.left = '60px';\r\n      }\r\n    }\r\n\r\n    if (this.frozen === TableFrozen.Last && items.length > 0) {\r\n      items[items.length - 1].frozen = this.frozen;\r\n    }\r\n  };\r\n\r\n  private interactiveTable: boolean;\r\n\r\n  private updateChildrenProps() {\r\n    // Skip if we don't have items yet\r\n    if (!this.headerItems || !this.rows) return;\r\n\r\n    if (this.headerEl) {\r\n      // Always refresh header items (ensures late-rendered selection column is included)\r\n      this.headerItems = Array.from(this.headerEl.querySelectorAll('ath-table-header-item'));\r\n    }\r\n\r\n    const columnStyles = this.headerItems.map(header => ({\r\n      alignment: header.alignment,\r\n      cellWidth: header.cellWidth,\r\n      hasInteractivity: header.hasInteractivity,\r\n    }));\r\n\r\n    this.headerItems.forEach(headerCell => {\r\n      if (this.color) headerCell.color = this.color;\r\n      if (this.size) headerCell.size = this.size;\r\n    });\r\n\r\n    this.setColumnFixed(this.headerItems);\r\n    this.rows.forEach(row => {\r\n      // Row properties\r\n      if (this.striped) row.striped = this.striped;\r\n      if (this.frozen) row.frozen = this.frozen;\r\n      // Ensure single-mode exclusivity (only one row selected)\r\n      if (this.selectable === TableSelectable.Single) {\r\n        const selectedRows = this.rows.filter(r => r.selected);\r\n        if (selectedRows.length > 1) {\r\n          // Keep the first, unselect the rest\r\n          selectedRows.slice(1).forEach(r => (r.selected = false));\r\n        }\r\n      }\r\n\r\n      // Cell properties\r\n      const cells = Array.from(row.querySelectorAll('ath-table-row-item'));\r\n      cells.forEach((cell, index) => {\r\n        const { alignment, cellWidth, hasInteractivity } = columnStyles[index] || {};\r\n        if (cellWidth) cell.cellWidth = cellWidth;\r\n        if (alignment) cell.alignment = alignment;\r\n        if (hasInteractivity) {\r\n          cell.hasInteractivity = hasInteractivity;\r\n          this.interactiveTable = true;\r\n        }\r\n        if (this.selectable !== TableSelectable.None || this.clickable || this.interactiveTable) {\r\n          cell.role = 'gridcell';\r\n        }\r\n        if (this.color) cell.color = this.color;\r\n        if (this.size) cell.size = this.size;\r\n      });\r\n      this.setColumnFixed(cells);\r\n    });\r\n\r\n    this.markLastRow();\r\n\r\n    // Update header select all state after all processing\r\n    if (this.headerEl && this.selectable === TableSelectable.Multiple) {\r\n      this.headerEl.selectAllState = this.getSelectAllState();\r\n      this.headerEl.totalRows = this.rows.length;\r\n      this.headerEl.selectedRows = this.rows.filter(row => row.selected).length;\r\n    }\r\n  }\r\n\r\n  /** Marks only the final ath-table-row actually visible in the body (ignoring ath-collapse wrappers and hidden content) */\r\n  private markLastRow() {\r\n    if (!this.rows || !this.rows.length) return;\r\n    // Reset previous flags\r\n    this.rows.forEach(r => (r.last = false));\r\n    const body = this.el.querySelector('ath-table-body');\r\n    if (!body) return;\r\n    // Collect rows in DOM order inside body (which may include rows nested in ath-collapse containers)\r\n    const orderedRows = Array.from(body.querySelectorAll('ath-table-row'));\r\n    // Find the last one that is not inside a collapsed (hidden) ath-collapse\r\n    for (let i = orderedRows.length - 1; i >= 0; i--) {\r\n      const row = orderedRows[i];\r\n      const collapseParent = row.closest('ath-collapse');\r\n      if (collapseParent) {\r\n        // Determine visibility based on owning parent row expanded state instead of collapse.show (which lingers until animation ends)\r\n        const parentRowId = collapseParent.id;\r\n        if (parentRowId) {\r\n          const parentRow = this.rows.find(r => r.rowId === parentRowId);\r\n          if (parentRow && !parentRow.expanded) {\r\n            // Parent is collapsed (or collapsing animation in progress) -> skip these child rows\r\n            continue;\r\n          }\r\n        }\r\n      }\r\n      row.last = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  private onRowSelectionChange = (e: CustomEvent) => {\r\n    const rowEl = e.target as HTMLAthTableRowElement;\r\n    if (this.selectable === TableSelectable.Single) {\r\n      // Deselect others\r\n      this.rows.forEach(r => (r.selected = r === rowEl));\r\n    }\r\n    this.emitSelectionChange();\r\n  };\r\n\r\n  private onRowClick = (e: CustomEvent) => {\r\n    const rowEl = e.target as HTMLAthTableRowElement;\r\n    let rowIndex = this.rows.indexOf(rowEl);\r\n\r\n    // If indexOf fails, try to find by rowId or by DOM position\r\n    if (rowIndex === -1) {\r\n      if (rowEl.rowId) {\r\n        rowIndex = this.rows.findIndex(r => r.rowId === rowEl.rowId);\r\n      } else {\r\n        // Find by DOM position as fallback\r\n        const allRows = Array.from(this.el.querySelectorAll('ath-table-row'));\r\n        rowIndex = allRows.indexOf(rowEl);\r\n      }\r\n    }\r\n\r\n    this.athTableClick.emit({\r\n      rowIndex: rowIndex >= 0 ? rowIndex : -1,\r\n      rowValue: rowEl.value,\r\n      rowId: rowEl.rowId,\r\n    });\r\n  };\r\n\r\n  private emitSelectionChange() {\r\n    const selectedIndexes: number[] = [];\r\n    const selectedValues: any[] = [];\r\n    this.rows.forEach((rowEl, index) => {\r\n      if (rowEl.selected) {\r\n        selectedIndexes.push(index);\r\n        selectedValues.push(rowEl.value);\r\n      }\r\n    });\r\n\r\n    // Update header select all state\r\n    if (this.headerEl && this.selectable === TableSelectable.Multiple) {\r\n      this.headerEl.selectAllState = this.getSelectAllState();\r\n      this.headerEl.totalRows = this.rows.length;\r\n      this.headerEl.selectedRows = selectedIndexes.length;\r\n    }\r\n\r\n    this.athSelectionChange.emit({ selectedIndexes, selectedValues });\r\n  }\r\n\r\n  private hasHierarchy(): boolean {\r\n    return this.rows?.some(r => r.hasChildren || r.parentId) ?? false;\r\n  }\r\n\r\n  private isInteractive(): boolean {\r\n    return this.clickable || this.selectable !== TableSelectable.None || this.interactiveTable;\r\n  }\r\n\r\n  private getAttributes = () => ({\r\n    role: this.hasHierarchy() ? 'treegrid' : this.isInteractive() ? 'grid' : 'table',\r\n    tabindex: this.el.getAttribute('tabindex') || '0',\r\n  });\r\n\r\n  private getHostClassNames = () => ({\r\n    'ath-table': true,\r\n    [`ath-table--${this.color}`]: !!this.color,\r\n  });\r\n\r\n  render() {\r\n    return (\r\n      <Host {...this.getAttributes()} class={this.getHostClassNames()}>\r\n        <div class=\"ath-table__header\" role=\"rowgroup\">\r\n          <slot name=\"header\"></slot>\r\n        </div>\r\n\r\n        <div class=\"ath-table__body\">\r\n          <slot name=\"body\"></slot>\r\n        </div>\r\n\r\n        <div class=\"ath-table__footer\">\r\n          <slot name=\"footer\"></slot>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}