import{h as t,r as a,c as i,H as n}from"./p-D2-yfY-d.js";const e=a=>{const i=()=>({"ath-pagination-page-button":true,...a.selected&&{"ath-pagination-page-button--selected":true},...a.disabled&&{"ath-pagination-page-button--disabled":true}});const n=()=>{if(!a.disabled&&a.onClick){a.onClick()}};return t("button",{ref:a.pageButtonRef,class:{...i()},onClick:n,"aria-label":`Página ${a.pageNumber}`,disabled:a.disabled,"aria-disabled":a.disabled?"true":"false","aria-current":a.selected?"page":undefined},t("span",{class:"ath-pagination-page-button-number"},a.pageNumber))};const o=".sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination{display:flex;padding:var(--ath-spacing-pagination-page-button-padding-y) var(--ath-spacing-pagination-page-button-padding-x);justify-content:center;align-items:center;border:none;border-radius:var(--ath-border-radius-pagination-page-button);background:var(--ath-color-pagination-page-button-bg-default)}.sc-ath-pagination-h .ath-pagination-page-button-number.sc-ath-pagination{color:var(--ath-color-pagination-page-button-fg-default);text-align:center;font-family:var(--ath-font-family-primary);font-size:var(--ath-font-size-comp-md);font-style:normal;font-weight:var(--ath-font-weight-medium);line-height:var(--ath-font-line-height-comp-sm);min-width:20px}.sc-ath-pagination-h .ath-pagination-page-button--disabled.sc-ath-pagination{cursor:not-allowed}.sc-ath-pagination-h .ath-pagination-page-button--disabled.sc-ath-pagination .ath-pagination-page-button-number.sc-ath-pagination{background:var(--ath-color-pagination-page-button-bg-default);color:var(--ath-color-fg-disabled)}.sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination:hover{background:var(--ath-color-pagination-page-button-bg-hovered)}.sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination:hover .ath-pagination-page-button-number.sc-ath-pagination{color:var(--ath-color-pagination-page-button-fg-hovered)}.sc-ath-pagination-h .ath-pagination-page-button.ath-pagination-page-button--disabled.sc-ath-pagination:hover{background:var(--ath-color-pagination-page-button-bg-default)}.sc-ath-pagination-h .ath-pagination-page-button.ath-pagination-page-button--disabled.sc-ath-pagination:hover .ath-pagination-page-button-number.sc-ath-pagination{color:var(--ath-color-fg-disabled)}.sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination:active{background:var(--ath-color-pagination-page-button-bg-pressed)}.sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination:active .ath-pagination-page-button-number.sc-ath-pagination{color:var(--ath-color-pagination-page-button-fg-pressed)}.sc-ath-pagination-h .ath-pagination-page-button.sc-ath-pagination:focus-visible:not(.ath-pagination-page-button--selected){outline:none;box-shadow:0 0 0 2px var(--ath-color-border-focus)}.sc-ath-pagination-h .ath-pagination-page-button--selected.sc-ath-pagination{background:var(--ath-color-pagination-page-button-bg-selected)}.sc-ath-pagination-h .ath-pagination-page-button--selected.sc-ath-pagination:focus-visible{box-shadow:0 0 0 2px var(--ath-color-drop-shadow-focus), 0 0 0 4px var(--ath-color-border-focus);outline:none}.sc-ath-pagination-h .ath-pagination-page-button--selected.sc-ath-pagination .ath-pagination-page-button-number.sc-ath-pagination{color:var(--ath-color-pagination-page-button-fg-selected)}.ath-pagination.sc-ath-pagination{display:inline-flex;align-items:center;gap:var(--ath-spacing-pagination-col-gap)}.ath-pagination-page-control.sc-ath-pagination{display:flex;align-items:center}.ath-pagination-page-control-list.sc-ath-pagination{display:flex;flex-direction:row;align-items:center;gap:var(--ath-spacing-pagination-page-control-col-gap);list-style:none;padding:0;margin:0}.ath-pagination-items-count.sc-ath-pagination{color:var(--ath-color-fg-subtle);font-family:var(--ath-font-family-body);font-size:var(--ath-font-size-body-md);font-style:normal;font-weight:var(--ath-font-weight-body-regular);line-height:var(--ath-font-line-height-body)}.ath-pagination-items-selector.sc-ath-pagination{display:flex;flex-direction:column;align-items:flex-start}";const s=class{constructor(t){a(this,t);this.athPaginate=i(this,"athPaginate");this.athItemsPerPageChange=i(this,"athItemsPerPageChange")}BUTTON_WIDTH=32+8;MOBILE_BREAKPOINT=768;DEFAULT_ITEMS_SELECTOR=[5,10,15];noEndButtons=false;noJumpButtons=false;noItemsCount=false;noItemsSelector=false;itemsSelector="[5, 10, 15]";updateItemsSelector(){this.itemsSelectorArray=[];try{const t=JSON.parse(this.itemsSelector.replace(/'/g,'"'));t.forEach((t=>{const a=typeof t==="string"?parseInt(t):t;if(!isNaN(a)){this.itemsSelectorArray.push(a)}}));if(this.itemsSelectorArray.length===0){this.itemsSelectorArray=this.DEFAULT_ITEMS_SELECTOR}}catch(t){console.error("Error parsing itemsSelector:",t);this.itemsSelectorArray=this.DEFAULT_ITEMS_SELECTOR}}itemsSelectorArray=[];itemsPerPage;selectedItemsPerPage;currentPage=1;currentPageState;totalItems;totalPages=1;disabled=false;athAriaLabel="Paginación de resultados";athPaginate;athItemsPerPageChange;paginationSize=5;onTotalItemsChange(){this.recalculateTotalPages()}onItemsPerPageChangeWatch(){this.recalculateTotalPages()}onCurrentPageExternalChange(){this.ensureCurrentPageInRange();this.recalcResponsiveWindow()}onItemsPerPageExternalChange(t){if(t!==this.selectedItemsPerPage){this.selectedItemsPerPage=t;this.recalculateTotalPages()}}isMobileScreen=false;onResize(){this.isMobileScreen=window.innerWidth<this.MOBILE_BREAKPOINT;this.calculatePaginationSize()}componentWillLoad(){this.updateItemsSelector();this.selectedItemsPerPage=this.itemsPerPage??this.itemsSelectorArray[0]??5;this.currentPageState=this.currentPage;if(typeof window!=="undefined"){this.isMobileScreen=window.innerWidth<this.MOBILE_BREAKPOINT}}componentDidLoad(){this.calculatePaginationSize();this.recalculateTotalPages();this.ensureCurrentPageInRange()}recalcResponsiveWindow(){if(typeof window!=="undefined"&&window.innerWidth<this.MOBILE_BREAKPOINT){this.calculatePaginationSize()}}recalculateTotalPages(){if(this.totalItems!=null&&this.selectedItemsPerPage){const t=Math.max(1,Math.ceil(this.totalItems/this.selectedItemsPerPage));if(t!==this.totalPages){this.totalPages=t}this.ensureCurrentPageInRange();this.recalcResponsiveWindow()}}ensureCurrentPageInRange(){if(this.totalPages==null||this.totalPages<1)return;if(this.currentPageState>this.totalPages){this.currentPageState=this.totalPages}else if(this.currentPageState<1){this.currentPageState=1}}calculatePaginationSize(){const t=window.innerWidth;let a=4;const i=this.getBlockStart(this.currentPageState,this.paginationSize);const n=this.getBlockStart(this.totalPages,this.paginationSize);if(i===1&&n!==1){a+=1}else if(i===n&&n!==1){a+=1}else if(i!==1&&i!==n){a+=2}const e=t-a*this.BUTTON_WIDTH;const o=Math.max(Math.floor(e/this.BUTTON_WIDTH),2);this.paginationSize=Math.min(Math.max(2,Math.min(o,5)),this.totalPages)}onAthPaginate(t){if(t!==this.currentPageState){this.currentPageState=t;this.athPaginate.emit(t)}}onAthItemsPerPageChange(t){if(t!==this.selectedItemsPerPage){this.selectedItemsPerPage=t;this.recalculateTotalPages();if(this.currentPageState!==1){this.currentPageState=1;this.athPaginate.emit(1)}this.athItemsPerPageChange.emit(t)}}getBlockStart(t,a){return Math.floor((t-1)/a)*a+1}getPaginationBlock(t,a,i){const n=Math.min(t+i-1,a);return Array.from({length:n-t+1},((a,i)=>t+i))}pageButtonRefs={};focusCurrentPageButton(){const t=this.pageButtonRefs[this.currentPageState];if(t?.focus){t.focus()}}onPrevBlock(){const t=this.getBlockStart(this.currentPageState,this.paginationSize);if(t>1){const a=t-this.paginationSize;this.onAthPaginate(a);setTimeout((()=>this.focusCurrentPageButton()),0)}}onNextBlock(){const t=this.getBlockStart(this.currentPageState,this.paginationSize);if(t+this.paginationSize<=this.totalPages){const a=t+this.paginationSize;this.onAthPaginate(a);setTimeout((()=>this.focusCurrentPageButton()),0)}}generateNavigationButtons(){return t("div",{class:"ath-pagination-page-control"},t("ul",{class:"ath-pagination-page-control-list"},!this.noEndButtons&&t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"first",clear:true,onAthClick:()=>this.onAthPaginate(1),disabled:this.disabled||this.currentPageState===1,"aria-label":"Primera página"})),t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"chevron_left",clear:true,onAthClick:()=>this.onAthPaginate(this.currentPageState-1),disabled:this.disabled||this.currentPageState<=1,"aria-label":"Anterior"})),!this.noJumpButtons&&this.currentPageState>1&&this.getBlockStart(this.currentPageState,this.paginationSize)>1&&t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"menu_horizontal",clear:true,onAthClick:()=>this.onPrevBlock(),disabled:this.disabled,"aria-label":"Bloque anterior"})),this.getPaginationBlock(this.getBlockStart(this.currentPageState,this.paginationSize),this.totalPages,this.paginationSize).map((a=>t("li",null,t(e,{...this.getPageButtonProps(a),pageButtonRef:t=>{if(t)this.pageButtonRefs[a]=t},onClick:()=>this.onAthPaginate(a)})))),!this.noJumpButtons&&this.currentPageState<this.totalPages&&this.getBlockStart(this.currentPageState,this.paginationSize)+this.paginationSize<=this.totalPages&&t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"menu_horizontal",clear:true,onAthClick:()=>this.onNextBlock(),disabled:this.disabled,"aria-label":"Bloque siguiente"})),t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"chevron_right",clear:true,onAthClick:()=>this.onAthPaginate(this.currentPageState+1),disabled:this.disabled||this.currentPageState===this.totalPages,"aria-label":"Siguiente"})),!this.noEndButtons&&t("li",null,t("ath-button",{size:"sm",color:"secondary","icon-position":"icon-only",icon:"last",clear:true,onAthClick:()=>this.onAthPaginate(this.totalPages),disabled:this.disabled||this.currentPageState===this.totalPages,"aria-label":"Última página"}))))}generateItemsCount(){if(!this.noItemsCount&&!this.isMobileScreen){return t("div",{class:"ath-pagination-items-count"},t("span",null,(this.currentPageState-1)*this.selectedItemsPerPage+1," - ",Math.min(this.currentPageState*this.selectedItemsPerPage,this.totalItems)," de ",this.totalItems," ","elementos"))}}generateItemsSelector(){if(!this.noItemsSelector&&!this.isMobileScreen){return t("div",{class:"ath-pagination-items-selector"},t("ath-dropdown",{onAthChange:t=>this.onItemsPerPageChange(t.detail),disabled:this.disabled},this.itemsSelectorArray.map((a=>t("ath-dropdown-option",{text:`${a} elementos por página`,value:a.toString(),selected:a===this.selectedItemsPerPage})))))}}getHostAttributes=()=>({"aria-label":this.athAriaLabel});generateStructure(){return t("nav",{class:"ath-pagination",...this.getHostAttributes()},this.generateNavigationButtons(),this.generateItemsCount(),this.generateItemsSelector())}getPageButtonProps=t=>({selected:this.currentPageState===t&&!this.disabled,disabled:this.disabled,pageNumber:t});onItemsPerPageChange(t){const a=t;if(a&&a.length>0){const t=parseInt(a[0].value,10);if(t&&t!==this.selectedItemsPerPage){this.onAthItemsPerPageChange(t)}}}render(){return t(n,{key:"bfd95602e0e7278c80591b6fc9fd9a0a2da24d3f"},this.generateStructure())}static get watchers(){return{itemsSelector:["updateItemsSelector"],totalItems:["onTotalItemsChange"],selectedItemsPerPage:["onItemsPerPageChangeWatch"],currentPageState:["onCurrentPageExternalChange"],itemsPerPage:["onItemsPerPageExternalChange"]}}};s.style=o;export{s as ath_pagination};
//# sourceMappingURL=p-813b58f1.entry.js.map