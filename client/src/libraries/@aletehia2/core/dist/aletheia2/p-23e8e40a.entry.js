import{r as t,c as e,a as i,h as a,H as s}from"./p-D2-yfY-d.js";import{f as h,a as r,b as n,g as o,c as d,d as c,e as l,i as p,y as u,m as f,k as g,l as b,F as m,h as k,j as v}from"./p-BNCX3DE-.js";import{F as y,a as x}from"./p-Bm3FWM6a.js";import{F as w}from"./p-BDuhLNMt.js";import"./p-BnU0zKUi.js";import{F as _}from"./p-DOV5slCt.js";import{F as D}from"./p-DFvcul4f.js";import{B as z}from"./p-D0e48E4w.js";import"./p-BV9c4BOf.js";import"./p-hrbYB415.js";const N={Medium:"md"};const M={Date:"date",Month:"month",Year:"year"};const C={Primary:"primary"};const j={None:"none",Error:"error"};const T='.ath-visibility-hidden,.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}:host .ath-input__field--size-sm{--input-padding-x:var(--ath-spacing-input-field-padding-x-sm);--input-padding-y:var(--ath-spacing-input-field-padding-y-sm)}:host .ath-input__field--size-md{--input-padding-x:var(--ath-spacing-input-field-padding-x-md);--input-padding-y:var(--ath-spacing-input-field-padding-y-md)}:host .ath-input__field--size-lg{--input-padding-x:var(--ath-spacing-input-field-padding-x-lg);--input-padding-y:var(--ath-spacing-input-field-padding-y-lg)}:host .ath-button_comp--size-xs{--button-padding:var(--ath-spacing-button-padding-around-xs)}:host .ath-button_comp--size-sm{--button-padding:var(--ath-spacing-button-padding-around-xs)}:host .ath-button_comp--size-md{--button-padding:var(--ath-spacing-button-padding-around-xs)}:host .ath-button_comp--size-lg{--button-padding:var(--ath-spacing-button-padding-around-sm)}:host .ath-datepicker-item{display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1 0 0;border-radius:var(--ath-border-radius-input-datepicker-cell);user-select:none;cursor:pointer;text-align:center;font-family:var(--ath-font-family-primary);font-size:var(--ath-font-size-body-md);font-style:normal;font-weight:var(--ath-font-weight-regular);line-height:var(--ath-font-line-height-comp-md);color:var(--ath-color-input-datepicker-option-fg-default)}:host .ath-datepicker-item.is-day{width:40px;height:40px}:host .ath-datepicker-item.is-month{width:64px;height:48px}:host .ath-datepicker-item.is-year{width:68px;height:48px}:host .ath-datepicker-item:focus-visible{outline:none}:host .ath-datepicker-item:focus-visible .ath-datepicker-item-content{box-shadow:0 0 0 2px var(--ath-color-border-focus);border:1px solid var(--ath-color-border-inverse-focus)}:host .ath-datepicker-item:focus-visible:hover .ath-datepicker-item-content,:host .ath-datepicker-item:focus-visible:active .ath-datepicker-item-content,:host .ath-datepicker-item:focus-visible.is-selected .ath-datepicker-item-content{box-shadow:0px 0px 0px 2px var(--ath-color-drop-shadow-focus), 0px 0px 0px 4px var(--ath-color-border-focus)}:host .ath-datepicker-item.is-start{border-radius:var(--ath-border-radius-input-datepicker-cell) 0 0 var(--ath-border-radius-input-datepicker-cell);background:var(--ath-color-input-datepicker-option-bg-primary-selected-range-default)}:host .ath-datepicker-item.is-middle{border-radius:0}:host .ath-datepicker-item.is-middle::before{content:"";position:absolute;z-index:-1;background:var(--ath-color-input-datepicker-option-bg-primary-selected-range-default)}:host .ath-datepicker-item.is-middle.is-day::before{width:42px;height:42px}:host .ath-datepicker-item.is-middle.is-month::before{width:66px;height:50px}:host .ath-datepicker-item.is-middle.is-year::before{width:70px;height:50px}:host .ath-datepicker-item.is-end{border-radius:0 var(--ath-border-radius-input-datepicker-cell) var(--ath-border-radius-input-datepicker-cell) 0;z-index:-1;background:var(--ath-color-input-datepicker-option-bg-primary-selected-range-default)}:host .ath-datepicker-item.is-start.is-accent{background:var(--ath-color-input-datepicker-option-bg-accent-selected-range-default)}:host .ath-datepicker-item.is-middle.is-accent::before{background:var(--ath-color-input-datepicker-option-bg-accent-selected-range-default)}:host .ath-datepicker-item.is-end.is-accent{z-index:-1;background:var(--ath-color-input-datepicker-option-bg-accent-selected-range-default)}:host .ath-datepicker-item .ath-datepicker-item-content{width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:var(--ath-border-radius-input-datepicker-cell)}.ath-datepicker-item.is-day :host .ath-datepicker-item .ath-datepicker-item-content{padding:var(--ath-spacing-input-datepicker-calendar-cell-padding-date)}.ath-datepicker-item.is-month :host .ath-datepicker-item .ath-datepicker-item-content{padding:var(--ath-spacing-input-datepicker-calendar-cell-padding-month)}.ath-datepicker-item.is-year :host .ath-datepicker-item .ath-datepicker-item-content{padding:var(--ath-spacing-input-datepicker-calendar-cell-padding-year)}:host .ath-datepicker-item .ath-datepicker-item-content:hover{background:var(--ath-color-bg-alpha-hovered)}:host .ath-datepicker-item .ath-datepicker-item-content.is-highlighted{color:var(--ath-color-fg-accent-default)}:host .ath-datepicker-item .ath-datepicker-item-content.is-highlighted:hover{color:var(--ath-color-fg-accent-hovered)}:host .ath-datepicker-item .ath-datepicker-item-content.is-highlighted:active{color:var(--ath-color-fg-accent-pressed)}:host .ath-datepicker-item .ath-datepicker-item-content.is-other-month{color:var(--ath-color-fg-disabled)}:host .ath-datepicker-item .ath-datepicker-item-content:active{background:var(--ath-color-bg-alpha-pressed)}:host .ath-datepicker-item .ath-datepicker-item-content.is-current{outline:2px solid var(--ath-color-input-datepicker-option-border-primary-current);outline-offset:1px}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected{background:var(--ath-color-input-datepicker-option-bg-primary-selected-default);color:var(--ath-color-input-datepicker-option-fg-selected-hovered)}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected:hover{color:var(--ath-color-input-datepicker-option-fg-selected-hovered);background:var(--ath-color-input-datepicker-option-bg-primary-selected-hovered)}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected:active{color:var(--ath-color-input-datepicker-option-fg-selected-hovered);background:var(--ath-color-input-datepicker-option-bg-primary-selected-pressed)}:host .ath-datepicker-item .ath-datepicker-item-content.is-current.is-accent{outline:2px solid var(--ath-color-input-datepicker-option-border-accent-current);outline-offset:1px}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected.is-accent{background:var(--ath-color-input-datepicker-option-bg-accent-selected-default)}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected.is-accent:hover{background:var(--ath-color-input-datepicker-option-bg-accent-selected-hovered)}:host .ath-datepicker-item .ath-datepicker-item-content.is-selected.is-accent:active{background:var(--ath-color-input-datepicker-option-bg-accent-selected-pressed)}:host .ath-datepicker-item .ath-datepicker-item-content.is-disabled{cursor:not-allowed;color:var(--ath-color-fg-disabled);background:transparent}:host .fc-calendar{display:flex;flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap);align-self:stretch}:host .fc-calendar__header-week{display:flex;align-items:center;align-self:stretch}:host .fc-calendar__header-week__day{display:flex;padding:8px;flex-direction:column;text-align:center;flex:1 0 0;color:var(--ath-color-fg-default);font-family:var(--ath-font-family-overline);font-size:var(--ath-font-size-overline);font-style:normal;font-weight:var(--ath-font-weight-overline);line-height:var(--ath-font-line-height-overline)}:host .fc-calendar__body-week{display:flex;flex-direction:column;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap)}:host .fc-calendar__row-days{justify-content:space-around;display:flex;align-items:center;align-self:stretch}:host .fc-calendar .w-full{width:100%}:host .fc-calendar-month{display:flex;flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap);width:200px;height:192px;min-width:200px;justify-content:center;align-items:center;justify-items:center}:host .fc-calendar-month__rows{display:flex;flex-direction:column;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap)}:host .fc-calendar-month__row-months{justify-content:space-around;display:flex;align-items:center;align-self:stretch}:host .fc-calendar-year{display:flex;flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap);width:200px;height:192px;min-width:200px;justify-content:center;align-items:center;justify-items:center}:host .fc-calendar-year__rows{display:flex;flex-direction:column;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap)}:host .fc-calendar-year__row-years{justify-content:space-around;display:flex;align-items:center;align-self:stretch}:host .ath-input{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;flex-wrap:wrap;row-gap:var(--ath-spacing-input-row-gap);width:100%}:host .wrapper{display:flex;flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-input-addons-row-gap);align-self:stretch;width:100%}:host .ath-input .ath-input__field{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:var(--ath-spacing-input-field-col-gap);align-self:stretch;border:1px solid var(--ath-color-input-border-default);border-radius:var(--input-border-radius);background:var(--ath-color-input-bg-default);padding:calc(var(--input-padding-y) - 1px) calc(var(--input-padding-x) - 1px)}:host .ath-input .ath-input__field:focus-within:not(:has(>button:focus)){box-shadow:0px 0px 0px 2px var(--ath-color-border-focus) inset;border:1px solid transparent;border-radius:var(--input-border-radius)}:host .ath-input .ath-input__field--error{border-color:var(--ath-color-border-danger-default)}:host .ath-input .ath-input__field--success{border-color:var(--ath-color-border-success-default)}:host .ath-input .ath-input__field--warning{border-color:var(--ath-color-border-warning-default)}:host .ath-input .ath-input__field--readonly{border:1px solid transparent;position:relative;background:none}:host .ath-input .ath-input__field--readonly::after{content:"";position:absolute;bottom:1px;width:100%;height:1px;background-color:var(--ath-color-input-border-default)}:host .ath-input .ath-input__field--readonly{border-radius:var(--ath-border-radius-input-readonly)}:host .ath-input .ath-input__field--readonly:focus-within{border:1px solid transparent}:host .ath-input .ath-input__field--readonly:focus-within::after{background-color:transparent}:host .ath-input .ath-input__field--readonly .ath-input__text--value{color:var(--ath-color-fg-default)}:host .ath-input .ath-input__field--disabled{background:var(--ath-color-bg-alpha-disabled);border-color:var(--ath-color-border-alpha-disabled)}:host .ath-input__text--value{flex:1 0 0;overflow:hidden;color:var(--ath-color-fg-default);text-overflow:ellipsis;font-family:var(--ath-font-family-primary);font-weight:var(--ath-font-weight-regular);font-size:var(--ath-font-size-input-text);line-height:var(--ath-font-line-height-input-text);border:none;width:100%;background-color:transparent;padding:0px var(--ath-spacing-input-text-padding-x)}:host .ath-input__text--value:focus{outline:1px solid transparent;border:none}:host .ath-input--unit{color:var(--ath-color-fg-default);font-family:var(--ath-font-family-primary);font-size:var(--ath-font-size-input-text);font-weight:var(--ath-font-weight-regular);line-height:var(--ath-font-line-height-input-text)}:host .ath-input--unit--disabled{color:var(--ath-color-fg-disabled)}:host input[type=password]::-ms-reveal,:host input[type=password]::-ms-clear{display:none}:host input::-webkit-outer-spin-button,:host input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host input[type=number]{-moz-appearance:textfield;appearance:textfield}:host .ath-visibility-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}:host .ath-button_comp{display:inline-flex;justify-content:center;align-items:center;border-radius:var(--ath-border-radius-button);border:none;background:none;padding:var(--button-padding);outline:none;transition:background 0.5s;cursor:pointer}:host .ath-button_comp:focus{background:var(--ath-color-bg-alpha-focus);box-shadow:0px 0px 0px 2px var(--ath-color-border-focus)}:host .ath-button_comp:hover{background:var(--ath-color-bg-alpha-hovered)}:host .ath-button_comp:active{background:var(--ath-color-bg-alpha-pressed);box-shadow:none}:host .ath-button_comp--disabled{pointer-events:none;color:var(--ath-color-button-icon-disabled)}:host .ath-input__label{display:flex;flex-direction:row;align-items:flex-start;gap:var(--ath-spacing-label-col-gap);font-family:var(--ath-font-family-primary);color:var(--ath-color-fg-default);font-weight:var(--ath-font-weight-medium);font-size:var(--ath-font-size-input-label);line-height:var(--ath-font-line-height-input-label)}:host .ath-input__label__wrapper{display:flex;align-items:center;gap:var(--ath-spacing-label-required-col-gap)}:host .ath-input__label ath-icon{color:var(--ath-color-fg-default)}:host .ath-input__label .required{color:var(--ath-color-fg-feedback-danger);padding-left:4px}:host .ath-input__label ath-button{display:flex;flex-direction:row;align-items:center;justify-content:center;width:24px;height:24px}:host .ath-input__helper-text{display:flex;justify-content:flex-start;align-items:center;align-self:stretch;color:var(--ath-color-fg-default);font-family:var(--ath-font-family-primary);font-size:var(--ath-font-size-body-sm);font-style:normal;font-weight:var(--ath-font-weight-body-regular);line-height:var(--ath-font-line-height-body)}:host .ath-input__feedback{display:flex;align-items:flex-start;gap:var(--ath-spacing-feedback-text-col-gap);align-self:stretch;font-family:var(--ath-font-family-primary);font-size:var(--ath-font-size-body-sm);font-style:normal;font-weight:var(--ath-font-weight-body-regular);line-height:var(--ath-font-line-height-body)}:host .ath-input__feedback--error{color:var(--ath-color-fg-feedback-danger)}:host .ath-input__feedback--success{color:var(--ath-color-fg-feedback-success)}:host .ath-input__feedback--warning{color:var(--ath-color-fg-feedback-warning)}:host .padding{display:flex;padding-top:var(--ath-spacing-feedback-text-padding-top);align-items:center}:host{--input-border-radius:var(--ath-border-radius-input-default)}:host .ath-datepicker{position:relative}:host .ath-datepicker-overlay{display:flex;padding:var(--ath-spacing-input-datepicker-calendar-overlay-padding-around);flex-direction:column;z-index:1000;opacity:0;transition:transform 300ms ease, opacity 300ms ease, visibility 300ms ease;visibility:hidden;min-width:288px;max-width:336px;align-items:center;position:absolute}:host .ath-datepicker-overlay.size-sm{top:41px}:host .ath-datepicker-overlay.size-sm__label{top:73px}:host .ath-datepicker-overlay.size-md{top:49px}:host .ath-datepicker-overlay.size-md__label{top:81px}:host .ath-datepicker-overlay.size-lg{top:57px}:host .ath-datepicker-overlay.size-lg__label{top:89px}:host .ath-datepicker-overlay{border-radius:var(--ath-border-radius-input-datepicker-overlay);border:1px solid var(--ath-color-input-datepicker-overlay-border);background:var(--ath-color-bg-surface-secondary-subtlest)}:host .ath-datepicker-overlay.is-active{opacity:1;transform:scale(1.0001) translateZ(0) translateY(0);visibility:visible}:host .ath-datepicker-overlay .ath-datepicker-calendar-date{display:flex;flex-direction:column;align-items:flex-start;gap:var(--ath-spacing-input-datepicker-calendar-overlay-row-gap);align-self:stretch}:host .ath-datepicker-overlay .ath-datepicker-calendar-date__header{display:flex;width:288px;justify-content:center;align-items:center;gap:var(--ath-spacing-input-datepicker-calendar-header-col-gap)}:host .ath-datepicker-overlay .ath-datepicker-calendar-date__header__date{display:flex;justify-content:center;align-items:center;gap:var(--ath-spacing-input-datepicker-calendar-header-date-col-gap);flex:1 0 0}:host .ath-datepicker-overlay .ath-datepicker-calendar-date__date{display:contents}:host .ath-datepicker-overlay .ath-datepicker-calendar-date__month,:host .ath-datepicker-overlay .ath-datepicker-calendar-date__year{display:flex;width:100%;height:286px;flex-direction:column;justify-content:center;align-items:center;gap:var(--ath-spacing-input-datepicker-calendar-cell-group-row-gap)}:host .ath-datepicker-overlay .ath-datepicker-calendar-date__footer{display:flex;justify-content:center;align-items:center;align-self:stretch}';let A=0;const F=class{constructor(i){t(this,i);this.athFocus=e(this,"athFocus");this.athBlur=e(this,"athBlur");this.athChange=e(this,"athChange");this.athInput=e(this,"athInput");if(i.$hostElement$["s-ei"]){this.internals=i.$hostElement$["s-ei"]}else{this.internals=i.$hostElement$.attachInternals();i.$hostElement$["s-ei"]=this.internals}}inputId=`ath-input-${A++}`;datepickerpopupId=`datepicker-popup-${A++}`;inputHintId;inputHintSROnlyId;inputFeedbackId;inputEl;returnInputFocus=false;initialValue;transitionTime=300;overlayTimeout=null;dateResetTimeout=null;get element(){return i(this)}internals;label;tooltipText;feedback=j.None;feedbackText;helperText;format="DD/MM/YYYY";placeholder;name;required=false;hideRequired=false;disabled=false;watchDisabled(){if(this.disabled)this.readonly=false}readonly=false;autofocus;disabledDates;updateDisabledDates(){this.disabledDatesAux=[];try{const t=JSON.parse(this.disabledDates.replace(/'/g,'"'));t.forEach((t=>{const e=typeof t==="string"?new Date(t):t;if(!isNaN(e.getTime())){this.disabledDatesAux.push(e)}}))}catch(t){this.disabledDatesAux=[]}}disabledDatesAux;highlightedDates;updateHighlightedDates(){this.highlightedDatesAux=[];try{const t=JSON.parse(this.highlightedDates.replace(/'/g,'"'));t.forEach((t=>{const e=typeof t==="string"?new Date(t):t;if(!isNaN(e.getTime())){this.highlightedDatesAux.push(e)}}))}catch(t){this.highlightedDatesAux=[]}}highlightedDatesAux;highlightedWeekends=false;min;updateMin(){if(this.min){try{this.minDate=new Date(this.min)}catch(t){this.minDate=undefined}}}minDate;max;updateMax(){if(this.max){try{this.maxDate=new Date(this.max)}catch(t){this.maxDate=undefined}}}maxDate;size=N.Medium;type=M.Date;color=C.Primary;inputAriaLabel;value;updateValue(){if(this.value){try{this.valueDate=new Date(this.value)}catch(t){this.valueDate=undefined;return}this.setInputValue(this.value);switch(this.type){case M.Year:this.inputValue=this.valueDate?n(this.valueDate):"";break;case M.Month:this.inputValue=this.valueDate?r(this.valueDate):"";break;default:this.inputValue=this.valueDate?h(this.valueDate,this.format):"";break}if(this.inputEl){this.inputEl.value=this.inputValue}}else{this.valueDate=undefined;this.setInputValue(undefined);this.inputValue=""}}submitOnEnter=false;valueDate;async setFocus(){if(this.inputEl){this.inputEl.focus()}}athFocus;athBlur;athChange;athInput;watchOpenState(){if(this.overlayTimeout!==null){clearTimeout(this.overlayTimeout);this.overlayTimeout=null}if(this.open){this.renderOverlay=true;setTimeout((()=>{document.addEventListener("mousedown",this.handleOutsideClick)}),0)}else{this.overlayTimeout=setTimeout((()=>{this.renderOverlay=false;this.overlayTimeout=null}),this.transitionTime);document.removeEventListener("mousedown",this.handleOutsideClick)}}disconnectedCallback(){document.removeEventListener("mousedown",this.handleOutsideClick);clearTimeout(this.overlayTimeout);clearTimeout(this.dateResetTimeout)}open=false;renderOverlay=false;wrongDate=false;feedbackWrong="";showType=M.Date;inputValue;shownDate=new Date;hasFocus=false;ariaLiveMessage="";componentDidLoad(){this.inputHintId=`${this.inputId}-hint`;this.inputHintSROnlyId=`${this.inputId}-hintSROnly`;this.inputFeedbackId=`${this.inputId}-feedback`;this.initialValue=this.value;this.setInputValue(this.value);if(this.autofocus){this.setFocus()}}componentWillLoad(){this.showType=this.type;this.updateMin();this.updateMax();this.updateValue();this.updateDisabledDates();this.updateHighlightedDates();if(this.valueDate){this.shownDate=this.valueDate}}formResetCallback(){this.value=this.initialValue;this.updateValue();this.athChange.emit(this.value)}handleDaySelect=(t,e)=>{this.returnInputFocus=true;this.hasFocus=false;this.value=e.toISOString();this.athChange.emit(this.value);this.shownDate=e;this.inputValue=h(e,this.format);this.open=false;this.wrongDate=false;this.feedbackWrong="";this.setAriaLiveMessage(`Fecha seleccionada: ${h(e,this.format)}`);this.setFocus()};handleMonthSelect=(t,e)=>{if(this.type===M.Month){this.returnInputFocus=true;this.hasFocus=false;this.value=e.toISOString();this.athChange.emit(this.value);this.shownDate=e;this.inputValue=r(e);this.open=false;this.wrongDate=false;this.feedbackWrong="";this.setAriaLiveMessage(`Mes seleccionado: ${r(e)}`);this.setFocus();return}this.shownDate=o(e,this.minDate,this.maxDate);this.hasFocus=true;this.showType=M.Date;this.setAriaLiveMessage(`Mes seleccionado: ${r(e)}. Vista de calendario abierta`)};handleYearSelect=(t,e)=>{if(this.type===M.Year){this.returnInputFocus=true;this.hasFocus=false;this.value=e.toISOString();this.athChange.emit(this.value);this.shownDate=e;this.inputValue=n(e);this.open=false;this.wrongDate=false;this.feedbackWrong="";this.setAriaLiveMessage(`Año seleccionado: ${n(e)}`);this.setFocus();return}this.shownDate=o(e,this.minDate,this.maxDate);this.hasFocus=true;this.showType=M.Month;this.setAriaLiveMessage(`Año seleccionado: ${n(e)}. Vista de selección de mes abierta`)};handleClickMonth=()=>{this.hasFocus=true;this.showType=M.Month;this.setAriaLiveMessage("Vista de selección de mes abierta")};handleClickYear=()=>{this.showType=M.Year;this.hasFocus=true;this.setAriaLiveMessage("Vista de selección de año abierta")};handlePrevButton=()=>{this.hasFocus=false;let t="";switch(this.showType){case M.Date:this.shownDate=o(c(this.shownDate,-1),this.minDate,this.maxDate);t=`Navegando a ${l(this.shownDate)} ${this.shownDate.getFullYear()}`;break;case M.Month:this.shownDate=o(d(this.shownDate,-1),this.minDate,this.maxDate);t=`Navegando al año ${this.shownDate.getFullYear()}`;break;case M.Year:this.shownDate=o(d(this.shownDate,-12),this.minDate,this.maxDate);t=`Navegando a la página que contiene los años ${this.shownDate.getFullYear()-this.shownDate.getFullYear()%10} - ${this.shownDate.getFullYear()-this.shownDate.getFullYear()%10+9}`;break}if(t){this.setAriaLiveMessage(t)}};isPrevButtonDisabled=()=>{switch(this.showType){case M.Date:return p(new Date(this.shownDate.getFullYear(),this.shownDate.getMonth(),0),[],this.minDate,this.maxDate);case M.Month:return p(new Date(this.shownDate.getFullYear(),0,0),[],this.minDate,this.maxDate);case M.Year:return p(d(new Date(this.shownDate.getFullYear(),0,0),-12),[],this.minDate,this.maxDate);default:return false}};handleNextButton=()=>{this.hasFocus=false;let t="";switch(this.showType){case M.Date:this.shownDate=o(c(this.shownDate,1),this.minDate,this.maxDate);t=`Navegando a ${l(this.shownDate)} ${this.shownDate.getFullYear()}`;break;case M.Month:this.shownDate=o(d(this.shownDate,1),this.minDate,this.maxDate);t=`Navegando al año ${this.shownDate.getFullYear()}`;break;case M.Year:this.shownDate=o(d(this.shownDate,12),this.minDate,this.maxDate);t=`Navegando a la página que contiene los años ${this.shownDate.getFullYear()-this.shownDate.getFullYear()%10} - ${this.shownDate.getFullYear()-this.shownDate.getFullYear()%10+9}`;break}if(t){this.setAriaLiveMessage(t)}};isNextButtonDisabled=()=>{switch(this.showType){case M.Date:return p(c(f(this.shownDate),1),[],this.minDate,this.maxDate);case M.Month:return p(d(u(this.shownDate),1),[],this.minDate,this.maxDate);case M.Year:return p(d(u(this.shownDate),12),[],this.minDate,this.maxDate);default:return false}};reset=()=>{this.value=undefined;this.inputValue="";this.shownDate=new Date;this.showType=this.type;this.athChange.emit(this.value)};handleInput=t=>{if(t.inputType==="deleteContentBackward"||t.inputType==="deleteContentForward"){this.inputValue=this.inputEl.value;this.athInput.emit(this.inputEl.value);return}if(this.type===M.Year){this.handleInputYear(t);return}if(this.type===M.Month){this.handleInputMonth(t);return}const e=this.format.split(/[^A-Za-z]/);const i=this.format.match(/[^A-Za-z0-9]/g)||["/"];const a=e.reduce(((t,e)=>t+e.length),0);const s=this.inputEl.value.replace(/\D/g,"").substring(0,a);if(i.includes(t.data)&&t.data===this.format[this.inputEl.value.length-1]){this.athInput.emit(this.inputEl.value);return}if(t.data&&isNaN(Number(t.data))){this.inputEl.value=this.inputValue??"";this.athInput.emit(this.inputEl.value);return}let h="";if(s.length>0){let t=0;e.forEach(((a,r)=>{const n=a.length;const o=s.substring(t,t+n);if(o.length>0){h+=o;t+=o.length;if(r<e.length-1&&t<s.length){h+=i[Math.min(r,i.length-1)]}}}))}this.inputEl.value=h;this.inputValue=h;this.athInput.emit(this.inputEl.value)};handleInputYear=t=>{if(t.data&&isNaN(Number(t.data))){this.inputEl.value=this.inputValue??"";this.athInput.emit(this.inputEl.value);return}if(Number(this.inputEl.value)>9999){this.inputEl.value=this.inputValue}this.inputValue=this.inputEl.value;this.athInput.emit(this.inputEl.value)};handleInputMonth=t=>{if(t.data&&isNaN(Number(t.data))&&t.data!=="/"){this.inputEl.value=this.inputValue??"";this.athInput.emit(this.inputEl.value);return}if(Number(this.inputEl.value)>12){this.inputEl.value=this.inputValue.padStart(2,"0")+"/"+t.data}if(t.data==="/"){if(this.inputValue&&this.inputValue.length<=2&&this.inputValue.length>0){this.inputEl.value=this.inputValue.padStart(2,"0")+t.data}else{this.inputEl.value=this.inputValue??"";this.athInput.emit(this.inputEl.value)}}this.inputValue=this.inputEl.value;this.athInput.emit(this.inputEl.value)};handleInputFocus=()=>{if(!this.returnInputFocus&&!this.readonly){this.open=true;this.setAriaLiveMessage("Calendario abierto. Use las teclas de flecha para navegar.")}this.returnInputFocus=false;this.athFocus.emit()};handleInputBlur=()=>{this.returnInputFocus=false};handleOutsideClick=t=>{if(!this.open){document.removeEventListener("mousedown",this.handleOutsideClick);return}const e=t.composedPath();const i=e.includes(this.element);if(!i){this.open=false;setTimeout((()=>{this.shownDate=this.valueDate??new Date}),200);this.returnInputFocus=false;this.setAriaLiveMessage("Calendario cerrado");this.athBlur.emit()}};handleInputChange=()=>{this.returnInputFocus=true;this.hasFocus=false;if(this.inputValue==""){this.value=undefined;return}if(this.type===M.Year){this.value=new Date(Number(this.inputValue),0,1).toISOString();this.athChange.emit(this.value);this.shownDate=new Date(Number(this.inputValue),0,1);this.wrongDate=false;this.feedbackWrong="";this.open=false;return}else if(this.type===M.Month){this.value=new Date(Number(this.inputValue.split("/")[1]),Number(this.inputValue.split("/")[0])-1,1).toISOString();this.athChange.emit(this.value);this.shownDate=new Date(Number(this.inputValue.split("/")[1]),Number(this.inputValue.split("/")[0])-1,1);this.wrongDate=false;this.feedbackWrong="";this.open=false;return}try{const t=g(this.inputValue,this.format);if(this.min&&new Date(this.min)&&t<new Date(this.min)||this.max&&new Date(this.max)&&t>new Date(this.max)||this.disabledDatesAux.some((e=>e.getTime()===t.getTime()))){this.wrongDate=true;this.feedbackWrong=this.feedbackText;this.value=undefined;this.athChange.emit(this.value);this.shownDate=new Date;this.inputValue="";this.open=false;return}this.value=t.toISOString();this.athChange.emit(this.value);this.wrongDate=false;this.feedbackWrong="";this.shownDate=t}catch(t){this.wrongDate=true;this.feedbackWrong="Fecha inexistente";this.value=undefined;this.athChange.emit(this.value);this.shownDate=new Date;this.inputValue="";this.setAriaLiveMessage("Error: Fecha inexistente o inválida")}this.open=false};handleKeydownOverInput=t=>{if(t.code==="ArrowDown"&&!this.disabled&&!this.readonly){t.preventDefault();t.stopPropagation();this.setAriaLiveMessage("Calendario abierto. Use las teclas de flecha para navegar.");if(!this.open){this.open=true}else{const t=this.element.shadowRoot?.querySelector(".ath-datepicker-overlay");if(!t)return;const e=Array.from(t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));e[0].focus()}}else if(t.code==="Enter"){this.submitOnEnter&&this.internals.form&&this.internals.form.requestSubmit()}else if(t.code==="Tab"){if(t.shiftKey){this.open=false;setTimeout((()=>{this.shownDate=this.valueDate??new Date}),200)}if(!this.open)this.athBlur.emit()}};handleKeyDownOverButton=(t,e)=>{let i=0;switch(t.code){case"ArrowDown":case"ArrowRight":t.stopPropagation();t.preventDefault();i=1;break;case"ArrowUp":case"ArrowLeft":t.stopPropagation();t.preventDefault();i=-1;break;case"PageUp":t.stopPropagation();t.preventDefault();i=-12;break;case"PageDown":t.stopPropagation();t.preventDefault();i=12;break}if(i!==0){this.hasFocus=false;switch(e){case"year":this.shownDate=o(d(this.shownDate,i),this.minDate,this.maxDate);break;case"month":this.shownDate=o(c(this.shownDate,i),this.minDate,this.maxDate);break}}};handleOnExit=()=>{this.hasFocus=false;this.returnInputFocus=true;setTimeout((()=>{this.setFocus()}),1);this.open=false;if(this.dateResetTimeout){clearTimeout(this.dateResetTimeout)}this.dateResetTimeout=setTimeout((()=>{this.shownDate=this.valueDate??new Date;this.dateResetTimeout=null}),200);this.setAriaLiveMessage("Calendario cerrado, foco devuelto al campo de entrada")};setAriaLiveMessage=t=>{this.ariaLiveMessage=t;setTimeout((()=>this.ariaLiveMessage=""),2e3)};getLabelProps=()=>({htmlForId:this.inputId,label:this.label,required:this.required,showRequired:!this.hideRequired,tooltipText:this.tooltipText,tooltipWidth:200});getMaxLength=()=>{switch(this.type){case M.Year:return 4;case M.Month:return 7;default:return this.format.length}};getInputProps=()=>({inputId:this.inputId,icon:"calendar",iconPosition:"right",type:this.type===M.Year?"number":"text",autocomplete:"off",name:this.name,pattern:"",placeholder:this.placeholder,value:this.inputValue,required:this.required,disabled:this.disabled,readonly:this.readonly,maxlength:this.getMaxLength(),inputAriaLabel:this.inputAriaLabel,hasButton:false,helperText:this.helperText,helperTextSROnly:b(),feedback:this.wrongDate?j.Error:this.feedback,feedbackText:this.wrongDate?this.feedbackWrong:this.feedbackText,tabindex:"0",size:this.size,onKeyDown:t=>this.handleKeydownOverInput(t),onInput:t=>this.handleInput(t),onFocus:()=>this.handleInputFocus(),onBlur:()=>this.handleInputBlur(),onChange:()=>this.handleInputChange(),onInputRef:t=>this.inputEl=t,role:"combobox",ariaExpanded:this.open,ariaControls:this.open?this.datepickerpopupId:undefined,ariaHaspopup:"grid"});getHelperTextProps=()=>({id:this.inputHintId,text:!!this.helperText?this.helperText.trim():""});getFeedbackProps=()=>({id:this.inputFeedbackId,type:this.wrongDate?j.Error:this.feedback,text:this.wrongDate?this.feedbackWrong:this.feedbackText});getDialogClassNames=()=>({"ath-datepicker-overlay":true,[`size-${this.size}${!!this.label?"__label":""}`]:true,"is-active":this.open});getPrevButtonAriaLabel=()=>{switch(this.showType){case M.Date:return"Mes anterior";case M.Month:return"Año anterior";case M.Year:return"Página de años anterior";default:return"Mes anterior"}};getNextButtonAriaLabel=()=>{switch(this.showType){case M.Date:return"Mes siguiente";case M.Month:return"Año siguiente";case M.Year:return"Página de años siguiente";default:return"Mes siguiente"}};setInputValue(t){if(this.internals&&"setFormValue"in this.internals){this.internals.setFormValue(t);this.internals.checkValidity()}}trapFocus=t=>{if(!this.open||t.key!=="Tab")return;const e=this.element.shadowRoot?.querySelector(".ath-datepicker-overlay");if(!e)return;const i=Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));const a=i[0];const s=i[i.length-1];if(t.shiftKey){if(this.element.shadowRoot.activeElement===a){t.preventDefault();s?.focus()}}else{if(this.element.shadowRoot.activeElement===s){t.preventDefault();a?.focus()}}};render(){const t=this.getLabelProps();const e=this.getHelperTextProps();const i=this.getFeedbackProps();const h=this.getInputProps();return a(s,{key:"60343874e23611b4447d42a5f32cbcec5ffe02d3"},a("div",{key:"38bf1196cad96cc84f41b7188b73b1b4031ef3ec",class:"ath-datepicker",onKeyDown:t=>{if(t.key==="Escape"){this.returnInputFocus=true;this.hasFocus=false;setTimeout((()=>{this.setFocus()}),1);this.open=false;setTimeout((()=>{this.shownDate=this.valueDate??new Date}),200);t.preventDefault();t.stopPropagation()}else{this.trapFocus(t)}}},a("div",{key:"16a173d5e11c1b8bd9fb8022b764fb20d4864694",class:"ath-input",onClick:t=>{t.preventDefault();setTimeout((()=>{this.setFocus()}),1)}},!!this.label&&a(_,{key:"c85e6c3666f5c3fc333b45507f745454722abe10",...t}),a("div",{key:"01ce76a1003b201aebd63a3d9d58eb40a9814410",class:"wrapper"},a(w,{key:"7e12172f7d159244a85d2427a9e536c63f7579aa",...h}),!!this.helperText&&!this.open&&a(y,{key:"c685842b7d7fe133860911fb7b013e2c6479994e",...e}),a("div",{key:"6bc796cf75dc83ef8d40c0e02e41dcd90d54eab5",class:"sr-only",id:this.inputHintSROnlyId},a("span",{key:"cd03023074464322f913015bf9a3ea6f8778519e"},b())),(this.feedback!==j.None&&!this.disabled&&!this.readonly&&!this.open||this.wrongDate)&&a(x,{key:"82ffcad21dd0e6ea2a7911a813f8419951902ca7",...i}))),a("div",{key:"3f5e5687113574b258b2a25458651c8f2060ddec","aria-live":"polite","aria-atomic":"true",class:"sr-only",role:"status"},this.ariaLiveMessage),this.renderOverlay&&a("div",{key:"4d9a5bc12f1c7e12f4ae80e5cb136323a65bf0c1",class:this.getDialogClassNames(),id:this.datepickerpopupId},a("div",{key:"1c6648bebb11d45eadc2a1cd360151132ebbc3e9",class:"ath-datepicker-calendar-date"},a("div",{key:"132d62998cd0013a2c20f603fac8153a1c026d83",class:"ath-datepicker-calendar-date__header"},a(D,{key:"d8545211845d257679023fab565eb1ee75c7f0e5",size:"sm",color:"default",iconPosition:z.IconOnly,icon:"chevron_left",disabled:this.isPrevButtonDisabled(),onClick:this.handlePrevButton,buttonAriaLabel:this.getPrevButtonAriaLabel()}),a("div",{key:"bf1e99bede0886956fd435bc34eb4d0cc7d649d9",class:"ath-datepicker-calendar-date__header__date"},this.showType!=="year"&&a("ath-button",{key:"a8ac7d911744d9428514a03d445e961456536c74",clear:true,size:"sm",onAthClick:this.handleClickMonth,onKeyDown:t=>this.handleKeyDownOverButton(t,"month"),"aria-label":`Cambiar a vista de selección de mes. Mes seleccionado: ${this.shownDate?l(this.shownDate):this.valueDate?l(this.valueDate):l(new Date)}`},this.shownDate?l(this.shownDate):this.valueDate?l(this.valueDate):l(new Date)),a("ath-button",{key:"0b4febfe29fc64e72cb98a771bdb0da172bed197",clear:true,size:"sm",onAthClick:this.handleClickYear,onKeyDown:t=>this.handleKeyDownOverButton(t,"year"),"aria-label":`Cambiar a vista de selección de año. Año seleccionado: ${this.shownDate?this.shownDate.getFullYear():this.valueDate?this.valueDate.getFullYear():(new Date).getFullYear()}`},this.shownDate?this.shownDate.getFullYear():this.valueDate?this.valueDate.getFullYear():(new Date).getFullYear())),a(D,{key:"9ef9487e6a25ae2c83eaff1a39b25a4d2961f9ff",size:"sm",color:"default",iconPosition:z.IconOnly,icon:"chevron_right",disabled:this.isNextButtonDisabled(),onClick:this.handleNextButton,buttonAriaLabel:this.getNextButtonAriaLabel()})),this.showType==="date"&&a("div",{key:"74a5276f0f9bcddd60ae77ac6e785af3df3e2433",class:"ath-datepicker-calendar-date__date"},a(m,{key:"86c3b0ba1913ba546f88978e56cbe95f89e78cda",shownDate:this.shownDate||this.valueDate||new Date,selectedDate:this.valueDate,hasFocus:this.hasFocus,onDateSelect:this.handleDaySelect,currentDate:new Date,color:this.color,disabledDate:this.disabledDatesAux,highlightedDate:this.highlightedDatesAux,highlightedWeekends:this.highlightedWeekends,minDate:this.minDate,maxDate:this.maxDate,onChangeShownDate:t=>{this.shownDate=t;this.hasFocus=true},onExit:this.handleOnExit})),this.showType==="month"&&a("div",{key:"0a1f99e0a50127fd49e04800bc6b26a41692eadf",class:"ath-datepicker-calendar-date__month"},a(k,{key:"1999c52136da23a16fe388e9ae90d8bc28d503e1",shownMonth:this.shownDate||this.valueDate||new Date,selectedMonth:this.valueDate,hasFocus:this.hasFocus,onMonthSelect:this.handleMonthSelect,currentMonth:new Date,color:this.color,disabledDates:this.disabledDatesAux,highlightedDates:this.highlightedDatesAux,minMonth:this.minDate,maxMonth:this.maxDate,onChangeShownMonth:t=>{this.shownDate=t;this.hasFocus=true},onExit:this.handleOnExit})),this.showType==="year"&&a("div",{key:"fc056c8f0dceb444576f4f32430260847d3d035f",class:"ath-datepicker-calendar-date__year"},a(v,{key:"a6dbfdff28f6978233617b9300305146710a6107",shownYear:this.shownDate||this.valueDate||new Date,selectedYear:this.valueDate,hasFocus:this.hasFocus,onYearSelect:this.handleYearSelect,currentYear:new Date,color:this.color,disabledDates:this.disabledDatesAux,highlightedDates:this.highlightedDatesAux,minYear:this.minDate,maxYear:this.maxDate,onChangeShownYear:t=>{this.shownDate=t;this.hasFocus=true},onExit:this.handleOnExit})),a("div",{key:"37f91da28018c7cc490926e100b91d17e77f9342",class:"ath-datepicker-calendar-date__footer"},a("ath-button",{key:"bb8fb4ba5551cbff5c6bf7a2cce7f3c663ef4945",clear:true,size:"sm",tabIndex:0,iconPosition:"left",icon:"reload_double",onAthClick:this.reset},"Restablecer"))))))}static get formAssociated(){return true}static get watchers(){return{disabled:["watchDisabled"],disabledDates:["updateDisabledDates"],highlightedDates:["updateHighlightedDates"],min:["updateMin"],max:["updateMax"],value:["updateValue"],open:["watchOpenState"]}}};F.style=T;export{F as ath_datepicker};
//# sourceMappingURL=p-23e8e40a.entry.js.map